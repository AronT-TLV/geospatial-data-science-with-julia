<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.555">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Geospatial Data Science with Julia - 5&nbsp; What are transforms?</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./06-projections.html" rel="next">
<link href="./04-geoproc.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./05-transforms.html">Part II: Transforms</a></li><li class="breadcrumb-item"><a href="./05-transforms.html"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">What are transforms?</span></a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Geospatial Data Science with Julia</a> 
        <div class="sidebar-tools-main">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Welcome</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./foreword.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Foreword</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./preface.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Part I: Foundations</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-geodata.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">What is geospatial data?</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-geoviz.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Scientific visualization</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-geoio.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Interfacing with GIS</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04-geoproc.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Geometric processing</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">Part II: Transforms</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05-transforms.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">What are transforms?</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06-projections.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Map projections 🚧</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./07-pipelines.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Building pipelines</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
 <span class="menu-text">Part III: Queries</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./08-splitcombine.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Split-apply-combine</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./09-geojoins.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Geospatial joins</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
 <span class="menu-text">Part IV: Interpolation</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./10-correlation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Geospatial correlation</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./11-interpolation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Simple interpolation</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true">
 <span class="menu-text">Part V: Applications</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./12-mining.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Mineral deposits</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./13-agriculture.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Agricultural fields 🚧</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./14-energy.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Petroleum reservoirs 🚧</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#motivation" id="toc-motivation" class="nav-link active" data-scroll-target="#motivation"><span class="header-section-number">5.1</span> Motivation</a></li>
  <li><a href="#feature-transforms" id="toc-feature-transforms" class="nav-link" data-scroll-target="#feature-transforms"><span class="header-section-number">5.2</span> Feature transforms</a>
  <ul class="collapse">
  <li><a href="#basic" id="toc-basic" class="nav-link" data-scroll-target="#basic"><span class="header-section-number">5.2.1</span> Basic</a></li>
  <li><a href="#cleaning" id="toc-cleaning" class="nav-link" data-scroll-target="#cleaning"><span class="header-section-number">5.2.2</span> Cleaning</a></li>
  <li><a href="#statistical" id="toc-statistical" class="nav-link" data-scroll-target="#statistical"><span class="header-section-number">5.2.3</span> Statistical</a></li>
  </ul></li>
  <li><a href="#geometric-transforms" id="toc-geometric-transforms" class="nav-link" data-scroll-target="#geometric-transforms"><span class="header-section-number">5.3</span> Geometric transforms</a>
  <ul class="collapse">
  <li><a href="#coordinate" id="toc-coordinate" class="nav-link" data-scroll-target="#coordinate"><span class="header-section-number">5.3.1</span> Coordinate</a></li>
  <li><a href="#advanced" id="toc-advanced" class="nav-link" data-scroll-target="#advanced"><span class="header-section-number">5.3.2</span> Advanced</a></li>
  </ul></li>
  <li><a href="#geospatial-transforms" id="toc-geospatial-transforms" class="nav-link" data-scroll-target="#geospatial-transforms"><span class="header-section-number">5.4</span> Geospatial transforms</a></li>
  <li><a href="#remarks" id="toc-remarks" class="nav-link" data-scroll-target="#remarks"><span class="header-section-number">5.5</span> Remarks</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./05-transforms.html">Part II: Transforms</a></li><li class="breadcrumb-item"><a href="./05-transforms.html"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">What are transforms?</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">What are transforms?</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="motivation" class="level2" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="motivation"><span class="header-section-number">5.1</span> Motivation</h2>
<p>In <strong>Part I</strong> of the book, we learned that our <code>GeoTable</code> representation of geospatial data provides the data access pattern of the <code>DataFrame</code>, a feature that is very convenient for data science. To recap, let’s consider the following geotable with four random variables:</p>
<div id="8698c0f6" class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>N <span class="op">=</span> <span class="fl">10000</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> [<span class="fl">2</span><span class="fu">randn</span>(N<span class="op">÷</span><span class="fl">2</span>) <span class="op">.+</span> <span class="fl">6</span>; <span class="fu">randn</span>(N<span class="op">÷</span><span class="fl">2</span>)]</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>b <span class="op">=</span> [<span class="fl">3</span><span class="fu">randn</span>(N<span class="op">÷</span><span class="fl">2</span>); <span class="fl">2</span><span class="fu">randn</span>(N<span class="op">÷</span><span class="fl">2</span>)]</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>c <span class="op">=</span> <span class="fu">randn</span>(N)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>d <span class="op">=</span> c <span class="op">.+</span> <span class="fl">0.6</span><span class="fu">randn</span>(N)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>table <span class="op">=</span> (; a, b, c, d)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>gt <span class="op">=</span> <span class="fu">georef</span>(table, <span class="fu">CartesianGrid</span>(<span class="fl">100</span>, <span class="fl">100</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="3">
<table class="caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<caption>10000×5 GeoTable over 100×100 CartesianGrid</caption>
<thead>
<tr class="header">
<th style="text-align: center;" data-quarto-table-cell-role="th">a</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">b</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">c</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">d</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">geometry</th>
</tr>
<tr class="odd subheader">
<th style="text-align: center;" data-quarto-table-cell-role="th">Continuous</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Continuous</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Continuous</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Continuous</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Quadrangle</th>
</tr>
<tr class="header subheader headerLastRow">
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">🖈 Cartesian{NoDatum}</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">4.88086</td>
<td style="text-align: center;">-0.824518</td>
<td style="text-align: center;">-0.110301</td>
<td style="text-align: center;">-0.457432</td>
<td style="text-align: center;">Quadrangle((x: 0.0 m, y: 0.0 m), ..., (x: 0.0 m, y: 1.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">8.4518</td>
<td style="text-align: center;">-1.05785</td>
<td style="text-align: center;">-0.624259</td>
<td style="text-align: center;">-1.13945</td>
<td style="text-align: center;">Quadrangle((x: 1.0 m, y: 0.0 m), ..., (x: 1.0 m, y: 1.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">8.0886</td>
<td style="text-align: center;">-0.48212</td>
<td style="text-align: center;">0.738434</td>
<td style="text-align: center;">-0.460492</td>
<td style="text-align: center;">Quadrangle((x: 2.0 m, y: 0.0 m), ..., (x: 2.0 m, y: 1.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">6.67651</td>
<td style="text-align: center;">-0.838924</td>
<td style="text-align: center;">-1.18036</td>
<td style="text-align: center;">-2.10943</td>
<td style="text-align: center;">Quadrangle((x: 3.0 m, y: 0.0 m), ..., (x: 3.0 m, y: 1.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">4.984</td>
<td style="text-align: center;">-2.74721</td>
<td style="text-align: center;">0.33299</td>
<td style="text-align: center;">0.493658</td>
<td style="text-align: center;">Quadrangle((x: 4.0 m, y: 0.0 m), ..., (x: 4.0 m, y: 1.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">5.59319</td>
<td style="text-align: center;">4.10399</td>
<td style="text-align: center;">0.418782</td>
<td style="text-align: center;">0.638024</td>
<td style="text-align: center;">Quadrangle((x: 5.0 m, y: 0.0 m), ..., (x: 5.0 m, y: 1.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">8.07717</td>
<td style="text-align: center;">0.0601576</td>
<td style="text-align: center;">1.09263</td>
<td style="text-align: center;">1.27728</td>
<td style="text-align: center;">Quadrangle((x: 6.0 m, y: 0.0 m), ..., (x: 6.0 m, y: 1.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">6.73127</td>
<td style="text-align: center;">-5.16782</td>
<td style="text-align: center;">0.0990073</td>
<td style="text-align: center;">-1.04241</td>
<td style="text-align: center;">Quadrangle((x: 7.0 m, y: 0.0 m), ..., (x: 7.0 m, y: 1.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">11.6715</td>
<td style="text-align: center;">2.02217</td>
<td style="text-align: center;">1.29547</td>
<td style="text-align: center;">1.39476</td>
<td style="text-align: center;">Quadrangle((x: 8.0 m, y: 0.0 m), ..., (x: 8.0 m, y: 1.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">6.25012</td>
<td style="text-align: center;">-0.387327</td>
<td style="text-align: center;">0.267691</td>
<td style="text-align: center;">1.0559</td>
<td style="text-align: center;">Quadrangle((x: 9.0 m, y: 0.0 m), ..., (x: 9.0 m, y: 1.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>We can easily retrieve the “a” column of the geotable as a vector, and plot its histogram:</p>
<div id="cd688151" class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>Mke.<span class="fu">hist</span>(gt.a, color <span class="op">=</span> <span class="st">"gray80"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>┌ Warning: Found `resolution` in the theme when creating a `Scene`. The `resolution` keyword for `Scene`s and `Figure`s has been deprecated. Use `Figure(; size = ...` or `Scene(; size = ...)` instead, which better reflects that this is a unitless size and not a pixel resolution. The key could also come from `set_theme!` calls or related theming functions.
└ @ Makie ~/.julia/packages/Makie/We6MY/src/scenes.jl:227</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="4">
<div>
<figure class="figure">
<p><img src="05-transforms_files/figure-html/cell-4-output-2.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>We can compute the cross-correlation between columns “a” and “b”:</p>
<div id="fd5883cf" class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cor</span>(gt.a, gt.b)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="5">
<pre><code>-0.020327543267778036</code></pre>
</div>
</div>
<p>And inspect bivariate distributions of the <code>values</code> of the geotable with <a href="https://github.com/sefffal/PairPlots.jl">PairPlots.jl</a> by <span class="citation" data-cites="Thompson2023">Thompson (<a href="references.html#ref-Thompson2023" role="doc-biblioref">2023</a>)</span>:</p>
<div id="46290e7c" class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">PairPlots</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="fu">pairplot</span>(<span class="fu">values</span>(gt))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>┌ Warning: Found `resolution` in the theme when creating a `Scene`. The `resolution` keyword for `Scene`s and `Figure`s has been deprecated. Use `Figure(; size = ...` or `Scene(; size = ...)` instead, which better reflects that this is a unitless size and not a pixel resolution. The key could also come from `set_theme!` calls or related theming functions.
└ @ Makie ~/.julia/packages/Makie/We6MY/src/scenes.jl:227</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="6">
<div>
<figure class="figure">
<p><img src="05-transforms_files/figure-html/cell-6-output-2.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>This pattern is useful to answer geoscientific questions via marginal analysis (i.e.&nbsp;entire columns treated as measurements of a single random variable). However, the answers to many questions in geosciences depend on <strong>where</strong> the measurements were made.</p>
<p>Attempting to answer geoscientific questions with basic access to rows and columns can be very frustrating. In particular, this approach is prone to unintentional removal of geospatial information:</p>
<div id="34ec8023" class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>gt.a</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="7">
<pre><code>10000-element Vector{Float64}:
  4.880855938315628
  8.451800236856808
  8.088603793608158
  6.676511371529799
  4.984003353102809
  5.593193140076812
  8.07717297564771
  6.731267303383349
 11.671478991880825
  6.250121223788107
  7.431714319271016
  5.989840257579509
  4.971888516489083
  ⋮
  0.15656589704585516
 -0.21993930566392456
  1.14204779527714
 -1.2759248077847885
 -1.566587020663301
 -0.8984893865614398
  1.9099283603954087
 -0.3542730519996907
 -0.25509494801597504
 -0.3764321458507479
  1.2363402593314872
  0.5341996653251873</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Any script that is written in terms of direct column access has the potential to discard the special <code>geometry</code> column, and become unreadable very quickly with the use of auxiliary indices for rows.</p>
</div>
</div>
<p>We propose a new approach to geospatial data science with the concept of <strong>transforms</strong>, which we introduce in three classes with practical examples:</p>
<ol type="1">
<li>Feature transforms</li>
<li>Geometric transforms</li>
<li>Geospatial transforms</li>
</ol>
</section>
<section id="feature-transforms" class="level2" data-number="5.2">
<h2 data-number="5.2" class="anchored" data-anchor-id="feature-transforms"><span class="header-section-number">5.2</span> Feature transforms</h2>
<p>A feature transform is a function that takes the <code>values</code> of the geotable and produces a new set of values over the same geospatial <code>domain</code>. The framework provides over 30 such transforms, ranging from basic selection of columns, to data cleaning, to advanced multivariate statistical transforms.</p>
<section id="basic" class="level3" data-number="5.2.1">
<h3 data-number="5.2.1" class="anchored" data-anchor-id="basic"><span class="header-section-number">5.2.1</span> Basic</h3>
<p>Let’s start with two basic and important transforms, <code>Select</code> and <code>Reject</code>. The <code>Select</code> transform can be used to select columns of interest from a geotable:</p>
<div id="7aa0a70e" class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>gt <span class="op">|&gt;</span> <span class="fu">Select</span>(<span class="st">"a"</span>, <span class="st">"b"</span>) <span class="co"># select columns "a" and "b"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="8">
<table class="caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<caption>10000×3 GeoTable over 100×100 CartesianGrid</caption>
<thead>
<tr class="header">
<th style="text-align: center;" data-quarto-table-cell-role="th">a</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">b</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">geometry</th>
</tr>
<tr class="odd subheader">
<th style="text-align: center;" data-quarto-table-cell-role="th">Continuous</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Continuous</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Quadrangle</th>
</tr>
<tr class="header subheader headerLastRow">
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">🖈 Cartesian{NoDatum}</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">4.88086</td>
<td style="text-align: center;">-0.824518</td>
<td style="text-align: center;">Quadrangle((x: 0.0 m, y: 0.0 m), ..., (x: 0.0 m, y: 1.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">8.4518</td>
<td style="text-align: center;">-1.05785</td>
<td style="text-align: center;">Quadrangle((x: 1.0 m, y: 0.0 m), ..., (x: 1.0 m, y: 1.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">8.0886</td>
<td style="text-align: center;">-0.48212</td>
<td style="text-align: center;">Quadrangle((x: 2.0 m, y: 0.0 m), ..., (x: 2.0 m, y: 1.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">6.67651</td>
<td style="text-align: center;">-0.838924</td>
<td style="text-align: center;">Quadrangle((x: 3.0 m, y: 0.0 m), ..., (x: 3.0 m, y: 1.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">4.984</td>
<td style="text-align: center;">-2.74721</td>
<td style="text-align: center;">Quadrangle((x: 4.0 m, y: 0.0 m), ..., (x: 4.0 m, y: 1.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">5.59319</td>
<td style="text-align: center;">4.10399</td>
<td style="text-align: center;">Quadrangle((x: 5.0 m, y: 0.0 m), ..., (x: 5.0 m, y: 1.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">8.07717</td>
<td style="text-align: center;">0.0601576</td>
<td style="text-align: center;">Quadrangle((x: 6.0 m, y: 0.0 m), ..., (x: 6.0 m, y: 1.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">6.73127</td>
<td style="text-align: center;">-5.16782</td>
<td style="text-align: center;">Quadrangle((x: 7.0 m, y: 0.0 m), ..., (x: 7.0 m, y: 1.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">11.6715</td>
<td style="text-align: center;">2.02217</td>
<td style="text-align: center;">Quadrangle((x: 8.0 m, y: 0.0 m), ..., (x: 8.0 m, y: 1.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">6.25012</td>
<td style="text-align: center;">-0.387327</td>
<td style="text-align: center;">Quadrangle((x: 9.0 m, y: 0.0 m), ..., (x: 9.0 m, y: 1.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>In the example above, we selected the columns “a” and “b” explicitly, but <code>Select</code> has various methods for more flexible column selection:</p>
<div id="9cdd6387" class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>gt <span class="op">|&gt;</span> <span class="fu">Select</span>(<span class="fl">1</span><span class="op">:</span><span class="fl">3</span>) <span class="co"># select columns 1 to 3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="9">
<table class="caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<caption>10000×4 GeoTable over 100×100 CartesianGrid</caption>
<thead>
<tr class="header">
<th style="text-align: center;" data-quarto-table-cell-role="th">a</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">b</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">c</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">geometry</th>
</tr>
<tr class="odd subheader">
<th style="text-align: center;" data-quarto-table-cell-role="th">Continuous</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Continuous</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Continuous</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Quadrangle</th>
</tr>
<tr class="header subheader headerLastRow">
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">🖈 Cartesian{NoDatum}</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">4.88086</td>
<td style="text-align: center;">-0.824518</td>
<td style="text-align: center;">-0.110301</td>
<td style="text-align: center;">Quadrangle((x: 0.0 m, y: 0.0 m), ..., (x: 0.0 m, y: 1.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">8.4518</td>
<td style="text-align: center;">-1.05785</td>
<td style="text-align: center;">-0.624259</td>
<td style="text-align: center;">Quadrangle((x: 1.0 m, y: 0.0 m), ..., (x: 1.0 m, y: 1.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">8.0886</td>
<td style="text-align: center;">-0.48212</td>
<td style="text-align: center;">0.738434</td>
<td style="text-align: center;">Quadrangle((x: 2.0 m, y: 0.0 m), ..., (x: 2.0 m, y: 1.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">6.67651</td>
<td style="text-align: center;">-0.838924</td>
<td style="text-align: center;">-1.18036</td>
<td style="text-align: center;">Quadrangle((x: 3.0 m, y: 0.0 m), ..., (x: 3.0 m, y: 1.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">4.984</td>
<td style="text-align: center;">-2.74721</td>
<td style="text-align: center;">0.33299</td>
<td style="text-align: center;">Quadrangle((x: 4.0 m, y: 0.0 m), ..., (x: 4.0 m, y: 1.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">5.59319</td>
<td style="text-align: center;">4.10399</td>
<td style="text-align: center;">0.418782</td>
<td style="text-align: center;">Quadrangle((x: 5.0 m, y: 0.0 m), ..., (x: 5.0 m, y: 1.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">8.07717</td>
<td style="text-align: center;">0.0601576</td>
<td style="text-align: center;">1.09263</td>
<td style="text-align: center;">Quadrangle((x: 6.0 m, y: 0.0 m), ..., (x: 6.0 m, y: 1.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">6.73127</td>
<td style="text-align: center;">-5.16782</td>
<td style="text-align: center;">0.0990073</td>
<td style="text-align: center;">Quadrangle((x: 7.0 m, y: 0.0 m), ..., (x: 7.0 m, y: 1.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">11.6715</td>
<td style="text-align: center;">2.02217</td>
<td style="text-align: center;">1.29547</td>
<td style="text-align: center;">Quadrangle((x: 8.0 m, y: 0.0 m), ..., (x: 8.0 m, y: 1.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">6.25012</td>
<td style="text-align: center;">-0.387327</td>
<td style="text-align: center;">0.267691</td>
<td style="text-align: center;">Quadrangle((x: 9.0 m, y: 0.0 m), ..., (x: 9.0 m, y: 1.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="fd8e0527" class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>gt <span class="op">|&gt;</span> <span class="fu">Select</span>(<span class="st">r"</span><span class="ch">[</span><span class="st">bcd</span><span class="ch">]</span><span class="st">"</span>) <span class="co"># columns matching regular expression</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="10">
<table class="caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<caption>10000×4 GeoTable over 100×100 CartesianGrid</caption>
<thead>
<tr class="header">
<th style="text-align: center;" data-quarto-table-cell-role="th">b</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">c</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">d</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">geometry</th>
</tr>
<tr class="odd subheader">
<th style="text-align: center;" data-quarto-table-cell-role="th">Continuous</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Continuous</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Continuous</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Quadrangle</th>
</tr>
<tr class="header subheader headerLastRow">
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">🖈 Cartesian{NoDatum}</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">-0.824518</td>
<td style="text-align: center;">-0.110301</td>
<td style="text-align: center;">-0.457432</td>
<td style="text-align: center;">Quadrangle((x: 0.0 m, y: 0.0 m), ..., (x: 0.0 m, y: 1.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">-1.05785</td>
<td style="text-align: center;">-0.624259</td>
<td style="text-align: center;">-1.13945</td>
<td style="text-align: center;">Quadrangle((x: 1.0 m, y: 0.0 m), ..., (x: 1.0 m, y: 1.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">-0.48212</td>
<td style="text-align: center;">0.738434</td>
<td style="text-align: center;">-0.460492</td>
<td style="text-align: center;">Quadrangle((x: 2.0 m, y: 0.0 m), ..., (x: 2.0 m, y: 1.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">-0.838924</td>
<td style="text-align: center;">-1.18036</td>
<td style="text-align: center;">-2.10943</td>
<td style="text-align: center;">Quadrangle((x: 3.0 m, y: 0.0 m), ..., (x: 3.0 m, y: 1.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">-2.74721</td>
<td style="text-align: center;">0.33299</td>
<td style="text-align: center;">0.493658</td>
<td style="text-align: center;">Quadrangle((x: 4.0 m, y: 0.0 m), ..., (x: 4.0 m, y: 1.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">4.10399</td>
<td style="text-align: center;">0.418782</td>
<td style="text-align: center;">0.638024</td>
<td style="text-align: center;">Quadrangle((x: 5.0 m, y: 0.0 m), ..., (x: 5.0 m, y: 1.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">0.0601576</td>
<td style="text-align: center;">1.09263</td>
<td style="text-align: center;">1.27728</td>
<td style="text-align: center;">Quadrangle((x: 6.0 m, y: 0.0 m), ..., (x: 6.0 m, y: 1.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">-5.16782</td>
<td style="text-align: center;">0.0990073</td>
<td style="text-align: center;">-1.04241</td>
<td style="text-align: center;">Quadrangle((x: 7.0 m, y: 0.0 m), ..., (x: 7.0 m, y: 1.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">2.02217</td>
<td style="text-align: center;">1.29547</td>
<td style="text-align: center;">1.39476</td>
<td style="text-align: center;">Quadrangle((x: 8.0 m, y: 0.0 m), ..., (x: 8.0 m, y: 1.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">-0.387327</td>
<td style="text-align: center;">0.267691</td>
<td style="text-align: center;">1.0559</td>
<td style="text-align: center;">Quadrangle((x: 9.0 m, y: 0.0 m), ..., (x: 9.0 m, y: 1.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>A convenient method is also provided to select and rename columns:</p>
<div id="d4396385" class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>gt <span class="op">|&gt;</span> <span class="fu">Select</span>(<span class="st">"a"</span> <span class="op">=&gt;</span> <span class="st">"A"</span>, <span class="st">"b"</span> <span class="op">=&gt;</span> <span class="st">"B"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="11">
<table class="caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<caption>10000×3 GeoTable over 100×100 CartesianGrid</caption>
<thead>
<tr class="header">
<th style="text-align: center;" data-quarto-table-cell-role="th">A</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">B</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">geometry</th>
</tr>
<tr class="odd subheader">
<th style="text-align: center;" data-quarto-table-cell-role="th">Continuous</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Continuous</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Quadrangle</th>
</tr>
<tr class="header subheader headerLastRow">
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">🖈 Cartesian{NoDatum}</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">4.88086</td>
<td style="text-align: center;">-0.824518</td>
<td style="text-align: center;">Quadrangle((x: 0.0 m, y: 0.0 m), ..., (x: 0.0 m, y: 1.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">8.4518</td>
<td style="text-align: center;">-1.05785</td>
<td style="text-align: center;">Quadrangle((x: 1.0 m, y: 0.0 m), ..., (x: 1.0 m, y: 1.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">8.0886</td>
<td style="text-align: center;">-0.48212</td>
<td style="text-align: center;">Quadrangle((x: 2.0 m, y: 0.0 m), ..., (x: 2.0 m, y: 1.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">6.67651</td>
<td style="text-align: center;">-0.838924</td>
<td style="text-align: center;">Quadrangle((x: 3.0 m, y: 0.0 m), ..., (x: 3.0 m, y: 1.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">4.984</td>
<td style="text-align: center;">-2.74721</td>
<td style="text-align: center;">Quadrangle((x: 4.0 m, y: 0.0 m), ..., (x: 4.0 m, y: 1.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">5.59319</td>
<td style="text-align: center;">4.10399</td>
<td style="text-align: center;">Quadrangle((x: 5.0 m, y: 0.0 m), ..., (x: 5.0 m, y: 1.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">8.07717</td>
<td style="text-align: center;">0.0601576</td>
<td style="text-align: center;">Quadrangle((x: 6.0 m, y: 0.0 m), ..., (x: 6.0 m, y: 1.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">6.73127</td>
<td style="text-align: center;">-5.16782</td>
<td style="text-align: center;">Quadrangle((x: 7.0 m, y: 0.0 m), ..., (x: 7.0 m, y: 1.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">11.6715</td>
<td style="text-align: center;">2.02217</td>
<td style="text-align: center;">Quadrangle((x: 8.0 m, y: 0.0 m), ..., (x: 8.0 m, y: 1.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">6.25012</td>
<td style="text-align: center;">-0.387327</td>
<td style="text-align: center;">Quadrangle((x: 9.0 m, y: 0.0 m), ..., (x: 9.0 m, y: 1.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>The <code>Reject</code> transform can be used to reject columns from a geotable that are not relevant for a given analysis. It supports the same column specification of <code>Select</code>:</p>
<div id="c542cd9e" class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>gt <span class="op">|&gt;</span> <span class="fu">Reject</span>(<span class="st">"b"</span>) <span class="co"># reject column "b"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="12">
<table class="caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<caption>10000×4 GeoTable over 100×100 CartesianGrid</caption>
<thead>
<tr class="header">
<th style="text-align: center;" data-quarto-table-cell-role="th">a</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">c</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">d</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">geometry</th>
</tr>
<tr class="odd subheader">
<th style="text-align: center;" data-quarto-table-cell-role="th">Continuous</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Continuous</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Continuous</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Quadrangle</th>
</tr>
<tr class="header subheader headerLastRow">
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">🖈 Cartesian{NoDatum}</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">4.88086</td>
<td style="text-align: center;">-0.110301</td>
<td style="text-align: center;">-0.457432</td>
<td style="text-align: center;">Quadrangle((x: 0.0 m, y: 0.0 m), ..., (x: 0.0 m, y: 1.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">8.4518</td>
<td style="text-align: center;">-0.624259</td>
<td style="text-align: center;">-1.13945</td>
<td style="text-align: center;">Quadrangle((x: 1.0 m, y: 0.0 m), ..., (x: 1.0 m, y: 1.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">8.0886</td>
<td style="text-align: center;">0.738434</td>
<td style="text-align: center;">-0.460492</td>
<td style="text-align: center;">Quadrangle((x: 2.0 m, y: 0.0 m), ..., (x: 2.0 m, y: 1.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">6.67651</td>
<td style="text-align: center;">-1.18036</td>
<td style="text-align: center;">-2.10943</td>
<td style="text-align: center;">Quadrangle((x: 3.0 m, y: 0.0 m), ..., (x: 3.0 m, y: 1.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">4.984</td>
<td style="text-align: center;">0.33299</td>
<td style="text-align: center;">0.493658</td>
<td style="text-align: center;">Quadrangle((x: 4.0 m, y: 0.0 m), ..., (x: 4.0 m, y: 1.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">5.59319</td>
<td style="text-align: center;">0.418782</td>
<td style="text-align: center;">0.638024</td>
<td style="text-align: center;">Quadrangle((x: 5.0 m, y: 0.0 m), ..., (x: 5.0 m, y: 1.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">8.07717</td>
<td style="text-align: center;">1.09263</td>
<td style="text-align: center;">1.27728</td>
<td style="text-align: center;">Quadrangle((x: 6.0 m, y: 0.0 m), ..., (x: 6.0 m, y: 1.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">6.73127</td>
<td style="text-align: center;">0.0990073</td>
<td style="text-align: center;">-1.04241</td>
<td style="text-align: center;">Quadrangle((x: 7.0 m, y: 0.0 m), ..., (x: 7.0 m, y: 1.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">11.6715</td>
<td style="text-align: center;">1.29547</td>
<td style="text-align: center;">1.39476</td>
<td style="text-align: center;">Quadrangle((x: 8.0 m, y: 0.0 m), ..., (x: 8.0 m, y: 1.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">6.25012</td>
<td style="text-align: center;">0.267691</td>
<td style="text-align: center;">1.0559</td>
<td style="text-align: center;">Quadrangle((x: 9.0 m, y: 0.0 m), ..., (x: 9.0 m, y: 1.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Unlike direct column access, the <code>Select</code> and <code>Reject</code> transforms preserve geospatial information.</p>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip for all users
</div>
</div>
<div class="callout-body-container callout-body">
<p>The <code>Select</code> transform can be used in conjunction with the <code>viewer</code> to quickly visualize a specific variable:</p>
<div id="bca84c78" class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>gt <span class="op">|&gt;</span> <span class="fu">Select</span>(<span class="st">"a"</span>) <span class="op">|&gt;</span> viewer</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>┌ Warning: Found `resolution` in the theme when creating a `Scene`. The `resolution` keyword for `Scene`s and `Figure`s has been deprecated. Use `Figure(; size = ...` or `Scene(; size = ...)` instead, which better reflects that this is a unitless size and not a pixel resolution. The key could also come from `set_theme!` calls or related theming functions.
└ @ Makie ~/.julia/packages/Makie/We6MY/src/scenes.jl:227</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="13">
<div>
<figure class="figure">
<p><img src="05-transforms_files/figure-html/cell-13-output-2.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
<p>The <code>Rename</code> transform can be used to rename specific columns of a geotable. It preserves all other columns that are not part of the column specification:</p>
<div id="2ce8b795" class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>gt <span class="op">|&gt;</span> <span class="fu">Rename</span>(<span class="st">"a"</span> <span class="op">=&gt;</span> <span class="st">"A"</span>, <span class="st">"b"</span> <span class="op">=&gt;</span> <span class="st">"B"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="14">
<table class="caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<caption>10000×5 GeoTable over 100×100 CartesianGrid</caption>
<thead>
<tr class="header">
<th style="text-align: center;" data-quarto-table-cell-role="th">A</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">B</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">c</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">d</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">geometry</th>
</tr>
<tr class="odd subheader">
<th style="text-align: center;" data-quarto-table-cell-role="th">Continuous</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Continuous</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Continuous</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Continuous</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Quadrangle</th>
</tr>
<tr class="header subheader headerLastRow">
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">🖈 Cartesian{NoDatum}</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">4.88086</td>
<td style="text-align: center;">-0.824518</td>
<td style="text-align: center;">-0.110301</td>
<td style="text-align: center;">-0.457432</td>
<td style="text-align: center;">Quadrangle((x: 0.0 m, y: 0.0 m), ..., (x: 0.0 m, y: 1.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">8.4518</td>
<td style="text-align: center;">-1.05785</td>
<td style="text-align: center;">-0.624259</td>
<td style="text-align: center;">-1.13945</td>
<td style="text-align: center;">Quadrangle((x: 1.0 m, y: 0.0 m), ..., (x: 1.0 m, y: 1.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">8.0886</td>
<td style="text-align: center;">-0.48212</td>
<td style="text-align: center;">0.738434</td>
<td style="text-align: center;">-0.460492</td>
<td style="text-align: center;">Quadrangle((x: 2.0 m, y: 0.0 m), ..., (x: 2.0 m, y: 1.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">6.67651</td>
<td style="text-align: center;">-0.838924</td>
<td style="text-align: center;">-1.18036</td>
<td style="text-align: center;">-2.10943</td>
<td style="text-align: center;">Quadrangle((x: 3.0 m, y: 0.0 m), ..., (x: 3.0 m, y: 1.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">4.984</td>
<td style="text-align: center;">-2.74721</td>
<td style="text-align: center;">0.33299</td>
<td style="text-align: center;">0.493658</td>
<td style="text-align: center;">Quadrangle((x: 4.0 m, y: 0.0 m), ..., (x: 4.0 m, y: 1.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">5.59319</td>
<td style="text-align: center;">4.10399</td>
<td style="text-align: center;">0.418782</td>
<td style="text-align: center;">0.638024</td>
<td style="text-align: center;">Quadrangle((x: 5.0 m, y: 0.0 m), ..., (x: 5.0 m, y: 1.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">8.07717</td>
<td style="text-align: center;">0.0601576</td>
<td style="text-align: center;">1.09263</td>
<td style="text-align: center;">1.27728</td>
<td style="text-align: center;">Quadrangle((x: 6.0 m, y: 0.0 m), ..., (x: 6.0 m, y: 1.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">6.73127</td>
<td style="text-align: center;">-5.16782</td>
<td style="text-align: center;">0.0990073</td>
<td style="text-align: center;">-1.04241</td>
<td style="text-align: center;">Quadrangle((x: 7.0 m, y: 0.0 m), ..., (x: 7.0 m, y: 1.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">11.6715</td>
<td style="text-align: center;">2.02217</td>
<td style="text-align: center;">1.29547</td>
<td style="text-align: center;">1.39476</td>
<td style="text-align: center;">Quadrangle((x: 8.0 m, y: 0.0 m), ..., (x: 8.0 m, y: 1.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">6.25012</td>
<td style="text-align: center;">-0.387327</td>
<td style="text-align: center;">0.267691</td>
<td style="text-align: center;">1.0559</td>
<td style="text-align: center;">Quadrangle((x: 9.0 m, y: 0.0 m), ..., (x: 9.0 m, y: 1.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>The <code>Identity</code> transform can be used as a placeholder to forward the geotable without modifications to the next transform:</p>
<div id="5695a34a" class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>gt <span class="op">|&gt;</span> <span class="fu">Identity</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="15">
<table class="caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<caption>10000×5 GeoTable over 100×100 CartesianGrid</caption>
<thead>
<tr class="header">
<th style="text-align: center;" data-quarto-table-cell-role="th">a</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">b</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">c</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">d</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">geometry</th>
</tr>
<tr class="odd subheader">
<th style="text-align: center;" data-quarto-table-cell-role="th">Continuous</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Continuous</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Continuous</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Continuous</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Quadrangle</th>
</tr>
<tr class="header subheader headerLastRow">
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">🖈 Cartesian{NoDatum}</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">4.88086</td>
<td style="text-align: center;">-0.824518</td>
<td style="text-align: center;">-0.110301</td>
<td style="text-align: center;">-0.457432</td>
<td style="text-align: center;">Quadrangle((x: 0.0 m, y: 0.0 m), ..., (x: 0.0 m, y: 1.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">8.4518</td>
<td style="text-align: center;">-1.05785</td>
<td style="text-align: center;">-0.624259</td>
<td style="text-align: center;">-1.13945</td>
<td style="text-align: center;">Quadrangle((x: 1.0 m, y: 0.0 m), ..., (x: 1.0 m, y: 1.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">8.0886</td>
<td style="text-align: center;">-0.48212</td>
<td style="text-align: center;">0.738434</td>
<td style="text-align: center;">-0.460492</td>
<td style="text-align: center;">Quadrangle((x: 2.0 m, y: 0.0 m), ..., (x: 2.0 m, y: 1.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">6.67651</td>
<td style="text-align: center;">-0.838924</td>
<td style="text-align: center;">-1.18036</td>
<td style="text-align: center;">-2.10943</td>
<td style="text-align: center;">Quadrangle((x: 3.0 m, y: 0.0 m), ..., (x: 3.0 m, y: 1.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">4.984</td>
<td style="text-align: center;">-2.74721</td>
<td style="text-align: center;">0.33299</td>
<td style="text-align: center;">0.493658</td>
<td style="text-align: center;">Quadrangle((x: 4.0 m, y: 0.0 m), ..., (x: 4.0 m, y: 1.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">5.59319</td>
<td style="text-align: center;">4.10399</td>
<td style="text-align: center;">0.418782</td>
<td style="text-align: center;">0.638024</td>
<td style="text-align: center;">Quadrangle((x: 5.0 m, y: 0.0 m), ..., (x: 5.0 m, y: 1.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">8.07717</td>
<td style="text-align: center;">0.0601576</td>
<td style="text-align: center;">1.09263</td>
<td style="text-align: center;">1.27728</td>
<td style="text-align: center;">Quadrangle((x: 6.0 m, y: 0.0 m), ..., (x: 6.0 m, y: 1.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">6.73127</td>
<td style="text-align: center;">-5.16782</td>
<td style="text-align: center;">0.0990073</td>
<td style="text-align: center;">-1.04241</td>
<td style="text-align: center;">Quadrangle((x: 7.0 m, y: 0.0 m), ..., (x: 7.0 m, y: 1.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">11.6715</td>
<td style="text-align: center;">2.02217</td>
<td style="text-align: center;">1.29547</td>
<td style="text-align: center;">1.39476</td>
<td style="text-align: center;">Quadrangle((x: 8.0 m, y: 0.0 m), ..., (x: 8.0 m, y: 1.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">6.25012</td>
<td style="text-align: center;">-0.387327</td>
<td style="text-align: center;">0.267691</td>
<td style="text-align: center;">1.0559</td>
<td style="text-align: center;">Quadrangle((x: 9.0 m, y: 0.0 m), ..., (x: 9.0 m, y: 1.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>The <code>RowTable</code> and <code>ColTable</code> transforms change the underlying table representation of the <code>values</code> of the geotable as discussed in the first chapter of the book:</p>
<div id="3497caae" class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>rt <span class="op">=</span> gt <span class="op">|&gt;</span> <span class="fu">RowTable</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="16">
<table class="caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<caption>10000×5 GeoTable over 100×100 CartesianGrid</caption>
<thead>
<tr class="header">
<th style="text-align: center;" data-quarto-table-cell-role="th">a</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">b</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">c</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">d</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">geometry</th>
</tr>
<tr class="odd subheader">
<th style="text-align: center;" data-quarto-table-cell-role="th">Continuous</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Continuous</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Continuous</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Continuous</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Quadrangle</th>
</tr>
<tr class="header subheader headerLastRow">
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">🖈 Cartesian{NoDatum}</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">4.88086</td>
<td style="text-align: center;">-0.824518</td>
<td style="text-align: center;">-0.110301</td>
<td style="text-align: center;">-0.457432</td>
<td style="text-align: center;">Quadrangle((x: 0.0 m, y: 0.0 m), ..., (x: 0.0 m, y: 1.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">8.4518</td>
<td style="text-align: center;">-1.05785</td>
<td style="text-align: center;">-0.624259</td>
<td style="text-align: center;">-1.13945</td>
<td style="text-align: center;">Quadrangle((x: 1.0 m, y: 0.0 m), ..., (x: 1.0 m, y: 1.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">8.0886</td>
<td style="text-align: center;">-0.48212</td>
<td style="text-align: center;">0.738434</td>
<td style="text-align: center;">-0.460492</td>
<td style="text-align: center;">Quadrangle((x: 2.0 m, y: 0.0 m), ..., (x: 2.0 m, y: 1.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">6.67651</td>
<td style="text-align: center;">-0.838924</td>
<td style="text-align: center;">-1.18036</td>
<td style="text-align: center;">-2.10943</td>
<td style="text-align: center;">Quadrangle((x: 3.0 m, y: 0.0 m), ..., (x: 3.0 m, y: 1.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">4.984</td>
<td style="text-align: center;">-2.74721</td>
<td style="text-align: center;">0.33299</td>
<td style="text-align: center;">0.493658</td>
<td style="text-align: center;">Quadrangle((x: 4.0 m, y: 0.0 m), ..., (x: 4.0 m, y: 1.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">5.59319</td>
<td style="text-align: center;">4.10399</td>
<td style="text-align: center;">0.418782</td>
<td style="text-align: center;">0.638024</td>
<td style="text-align: center;">Quadrangle((x: 5.0 m, y: 0.0 m), ..., (x: 5.0 m, y: 1.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">8.07717</td>
<td style="text-align: center;">0.0601576</td>
<td style="text-align: center;">1.09263</td>
<td style="text-align: center;">1.27728</td>
<td style="text-align: center;">Quadrangle((x: 6.0 m, y: 0.0 m), ..., (x: 6.0 m, y: 1.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">6.73127</td>
<td style="text-align: center;">-5.16782</td>
<td style="text-align: center;">0.0990073</td>
<td style="text-align: center;">-1.04241</td>
<td style="text-align: center;">Quadrangle((x: 7.0 m, y: 0.0 m), ..., (x: 7.0 m, y: 1.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">11.6715</td>
<td style="text-align: center;">2.02217</td>
<td style="text-align: center;">1.29547</td>
<td style="text-align: center;">1.39476</td>
<td style="text-align: center;">Quadrangle((x: 8.0 m, y: 0.0 m), ..., (x: 8.0 m, y: 1.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">6.25012</td>
<td style="text-align: center;">-0.387327</td>
<td style="text-align: center;">0.267691</td>
<td style="text-align: center;">1.0559</td>
<td style="text-align: center;">Quadrangle((x: 9.0 m, y: 0.0 m), ..., (x: 9.0 m, y: 1.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="ac574346" class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>rt <span class="op">|&gt;</span> values <span class="op">|&gt;</span> typeof</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="17">
<div class="ansi-escaped-output">
<pre>Vector{@NamedTuple{a::Float64, b::Float64, c::Float64, d::Float64}}<span class="ansi-bright-black-fg"> (alias for </span><span class="ansi-bright-black-fg">Array{@NamedTuple{a::Float64, b::Float64, c::Float64, d::Float64}, 1}</span><span class="ansi-bright-black-fg">)</span></pre>
</div>
</div>
</div>
<p>The <code>Functional</code> transform can be used to apply a function to columns of a geotable in place:</p>
<div id="bac8e68a" class="cell" data-execution_count="17">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>gt <span class="op">|&gt;</span> <span class="fu">Functional</span>(cos) <span class="op">|&gt;</span> values <span class="op">|&gt;</span> pairplot</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>┌ Warning: Found `resolution` in the theme when creating a `Scene`. The `resolution` keyword for `Scene`s and `Figure`s has been deprecated. Use `Figure(; size = ...` or `Scene(; size = ...)` instead, which better reflects that this is a unitless size and not a pixel resolution. The key could also come from `set_theme!` calls or related theming functions.
└ @ Makie ~/.julia/packages/Makie/We6MY/src/scenes.jl:227</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="18">
<div>
<figure class="figure">
<p><img src="05-transforms_files/figure-html/cell-18-output-2.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="cc3d58b2" class="cell" data-execution_count="18">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>gt <span class="op">|&gt;</span> <span class="fu">Functional</span>(<span class="st">"a"</span> <span class="op">=&gt;</span> cos, <span class="st">"b"</span> <span class="op">=&gt;</span> sin) <span class="op">|&gt;</span> values <span class="op">|&gt;</span> pairplot</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>┌ Warning: Found `resolution` in the theme when creating a `Scene`. The `resolution` keyword for `Scene`s and `Figure`s has been deprecated. Use `Figure(; size = ...` or `Scene(; size = ...)` instead, which better reflects that this is a unitless size and not a pixel resolution. The key could also come from `set_theme!` calls or related theming functions.
└ @ Makie ~/.julia/packages/Makie/We6MY/src/scenes.jl:227</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="19">
<div>
<figure class="figure">
<p><img src="05-transforms_files/figure-html/cell-19-output-2.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>The <code>Map</code> transform can be used to create new columns from existing columns in the geotable. It takes a column specification, calls a function on the selected columns row-by-row, and returns the result as a new column:</p>
<div id="9cd4933a" class="cell" data-execution_count="19">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>gt <span class="op">|&gt;</span> <span class="fu">Map</span>(<span class="st">"a"</span> <span class="op">=&gt;</span> sin, <span class="st">"b"</span> <span class="op">=&gt;</span> cos <span class="op">=&gt;</span> <span class="st">"cos(b)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="20">
<table class="caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<caption>10000×7 GeoTable over 100×100 CartesianGrid</caption>
<thead>
<tr class="header">
<th style="text-align: center;" data-quarto-table-cell-role="th">a</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">b</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">c</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">d</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">sin_a</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">cos(b)</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">geometry</th>
</tr>
<tr class="odd subheader">
<th style="text-align: center;" data-quarto-table-cell-role="th">Continuous</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Continuous</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Continuous</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Continuous</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Continuous</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Continuous</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Quadrangle</th>
</tr>
<tr class="header subheader headerLastRow">
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">🖈 Cartesian{NoDatum}</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">4.88086</td>
<td style="text-align: center;">-0.824518</td>
<td style="text-align: center;">-0.110301</td>
<td style="text-align: center;">-0.457432</td>
<td style="text-align: center;">-0.985843</td>
<td style="text-align: center;">0.678911</td>
<td style="text-align: center;">Quadrangle((x: 0.0 m, y: 0.0 m), ..., (x: 0.0 m, y: 1.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">8.4518</td>
<td style="text-align: center;">-1.05785</td>
<td style="text-align: center;">-0.624259</td>
<td style="text-align: center;">-1.13945</td>
<td style="text-align: center;">0.826565</td>
<td style="text-align: center;">0.490743</td>
<td style="text-align: center;">Quadrangle((x: 1.0 m, y: 0.0 m), ..., (x: 1.0 m, y: 1.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">8.0886</td>
<td style="text-align: center;">-0.48212</td>
<td style="text-align: center;">0.738434</td>
<td style="text-align: center;">-0.460492</td>
<td style="text-align: center;">0.972602</td>
<td style="text-align: center;">0.886014</td>
<td style="text-align: center;">Quadrangle((x: 2.0 m, y: 0.0 m), ..., (x: 2.0 m, y: 1.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">6.67651</td>
<td style="text-align: center;">-0.838924</td>
<td style="text-align: center;">-1.18036</td>
<td style="text-align: center;">-2.10943</td>
<td style="text-align: center;">0.383263</td>
<td style="text-align: center;">0.668264</td>
<td style="text-align: center;">Quadrangle((x: 3.0 m, y: 0.0 m), ..., (x: 3.0 m, y: 1.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">4.984</td>
<td style="text-align: center;">-2.74721</td>
<td style="text-align: center;">0.33299</td>
<td style="text-align: center;">0.493658</td>
<td style="text-align: center;">-0.963339</td>
<td style="text-align: center;">-0.923234</td>
<td style="text-align: center;">Quadrangle((x: 4.0 m, y: 0.0 m), ..., (x: 4.0 m, y: 1.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">5.59319</td>
<td style="text-align: center;">4.10399</td>
<td style="text-align: center;">0.418782</td>
<td style="text-align: center;">0.638024</td>
<td style="text-align: center;">-0.636531</td>
<td style="text-align: center;">-0.571553</td>
<td style="text-align: center;">Quadrangle((x: 5.0 m, y: 0.0 m), ..., (x: 5.0 m, y: 1.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">8.07717</td>
<td style="text-align: center;">0.0601576</td>
<td style="text-align: center;">1.09263</td>
<td style="text-align: center;">1.27728</td>
<td style="text-align: center;">0.975196</td>
<td style="text-align: center;">0.998191</td>
<td style="text-align: center;">Quadrangle((x: 6.0 m, y: 0.0 m), ..., (x: 6.0 m, y: 1.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">6.73127</td>
<td style="text-align: center;">-5.16782</td>
<td style="text-align: center;">0.0990073</td>
<td style="text-align: center;">-1.04241</td>
<td style="text-align: center;">0.433238</td>
<td style="text-align: center;">0.43985</td>
<td style="text-align: center;">Quadrangle((x: 7.0 m, y: 0.0 m), ..., (x: 7.0 m, y: 1.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">11.6715</td>
<td style="text-align: center;">2.02217</td>
<td style="text-align: center;">1.29547</td>
<td style="text-align: center;">1.39476</td>
<td style="text-align: center;">-0.780141</td>
<td style="text-align: center;">-0.436205</td>
<td style="text-align: center;">Quadrangle((x: 8.0 m, y: 0.0 m), ..., (x: 8.0 m, y: 1.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">6.25012</td>
<td style="text-align: center;">-0.387327</td>
<td style="text-align: center;">0.267691</td>
<td style="text-align: center;">1.0559</td>
<td style="text-align: center;">-0.0330581</td>
<td style="text-align: center;">0.925922</td>
<td style="text-align: center;">Quadrangle((x: 9.0 m, y: 0.0 m), ..., (x: 9.0 m, y: 1.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="ad1d3bf8" class="cell" data-execution_count="20">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>gt <span class="op">|&gt;</span> <span class="fu">Map</span>([<span class="fl">2</span>, <span class="fl">3</span>] <span class="op">=&gt;</span> ((b, c) <span class="op">-&gt;</span> <span class="fl">2</span>b <span class="op">+</span> c) <span class="op">=&gt;</span> <span class="st">"f(b, c)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="21">
<table class="caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<caption>10000×6 GeoTable over 100×100 CartesianGrid</caption>
<thead>
<tr class="header">
<th style="text-align: center;" data-quarto-table-cell-role="th">a</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">b</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">c</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">d</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">f(b, c)</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">geometry</th>
</tr>
<tr class="odd subheader">
<th style="text-align: center;" data-quarto-table-cell-role="th">Continuous</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Continuous</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Continuous</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Continuous</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Continuous</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Quadrangle</th>
</tr>
<tr class="header subheader headerLastRow">
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">🖈 Cartesian{NoDatum}</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">4.88086</td>
<td style="text-align: center;">-0.824518</td>
<td style="text-align: center;">-0.110301</td>
<td style="text-align: center;">-0.457432</td>
<td style="text-align: center;">-1.75934</td>
<td style="text-align: center;">Quadrangle((x: 0.0 m, y: 0.0 m), ..., (x: 0.0 m, y: 1.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">8.4518</td>
<td style="text-align: center;">-1.05785</td>
<td style="text-align: center;">-0.624259</td>
<td style="text-align: center;">-1.13945</td>
<td style="text-align: center;">-2.73997</td>
<td style="text-align: center;">Quadrangle((x: 1.0 m, y: 0.0 m), ..., (x: 1.0 m, y: 1.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">8.0886</td>
<td style="text-align: center;">-0.48212</td>
<td style="text-align: center;">0.738434</td>
<td style="text-align: center;">-0.460492</td>
<td style="text-align: center;">-0.225807</td>
<td style="text-align: center;">Quadrangle((x: 2.0 m, y: 0.0 m), ..., (x: 2.0 m, y: 1.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">6.67651</td>
<td style="text-align: center;">-0.838924</td>
<td style="text-align: center;">-1.18036</td>
<td style="text-align: center;">-2.10943</td>
<td style="text-align: center;">-2.85821</td>
<td style="text-align: center;">Quadrangle((x: 3.0 m, y: 0.0 m), ..., (x: 3.0 m, y: 1.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">4.984</td>
<td style="text-align: center;">-2.74721</td>
<td style="text-align: center;">0.33299</td>
<td style="text-align: center;">0.493658</td>
<td style="text-align: center;">-5.16143</td>
<td style="text-align: center;">Quadrangle((x: 4.0 m, y: 0.0 m), ..., (x: 4.0 m, y: 1.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">5.59319</td>
<td style="text-align: center;">4.10399</td>
<td style="text-align: center;">0.418782</td>
<td style="text-align: center;">0.638024</td>
<td style="text-align: center;">8.62677</td>
<td style="text-align: center;">Quadrangle((x: 5.0 m, y: 0.0 m), ..., (x: 5.0 m, y: 1.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">8.07717</td>
<td style="text-align: center;">0.0601576</td>
<td style="text-align: center;">1.09263</td>
<td style="text-align: center;">1.27728</td>
<td style="text-align: center;">1.21294</td>
<td style="text-align: center;">Quadrangle((x: 6.0 m, y: 0.0 m), ..., (x: 6.0 m, y: 1.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">6.73127</td>
<td style="text-align: center;">-5.16782</td>
<td style="text-align: center;">0.0990073</td>
<td style="text-align: center;">-1.04241</td>
<td style="text-align: center;">-10.2366</td>
<td style="text-align: center;">Quadrangle((x: 7.0 m, y: 0.0 m), ..., (x: 7.0 m, y: 1.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">11.6715</td>
<td style="text-align: center;">2.02217</td>
<td style="text-align: center;">1.29547</td>
<td style="text-align: center;">1.39476</td>
<td style="text-align: center;">5.33981</td>
<td style="text-align: center;">Quadrangle((x: 8.0 m, y: 0.0 m), ..., (x: 8.0 m, y: 1.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">6.25012</td>
<td style="text-align: center;">-0.387327</td>
<td style="text-align: center;">0.267691</td>
<td style="text-align: center;">1.0559</td>
<td style="text-align: center;">-0.506963</td>
<td style="text-align: center;">Quadrangle((x: 9.0 m, y: 0.0 m), ..., (x: 9.0 m, y: 1.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>The name of the resulting column can be provided or omitted. If the name is omitted like in the example above with the column “a”, it is created by concatenation of column and function names.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>The <code>Map</code> transform mimics the behavior of the <code>transform</code> function in DataFrames.jl, except that it always broadcasts the functions to the rows of the selected columns and always produces a single column for each function.</p>
</div>
</div>
<p>To filter rows in the geotable based on a given predicate (i.e., a function that returns <code>true</code> or <code>false</code>), we can use the <code>Filter</code> transform:</p>
<div id="5505fb32" class="cell" data-execution_count="21">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>gt <span class="op">|&gt;</span> <span class="fu">Filter</span>(row <span class="op">-&gt;</span> row.a <span class="op">&lt;</span> <span class="fl">0</span> <span class="op">&amp;&amp;</span> row.b <span class="op">&gt;</span> <span class="fl">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="22">
<table class="caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<caption>1303×5 GeoTable over 1303 view(::CartesianGrid, [1129, 3404, 5001, 5015, ..., 9983, 9985, 9993, 9997])</caption>
<thead>
<tr class="header">
<th style="text-align: center;" data-quarto-table-cell-role="th">a</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">b</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">c</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">d</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">geometry</th>
</tr>
<tr class="odd subheader">
<th style="text-align: center;" data-quarto-table-cell-role="th">Continuous</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Continuous</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Continuous</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Continuous</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Quadrangle</th>
</tr>
<tr class="header subheader headerLastRow">
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">🖈 Cartesian{NoDatum}</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">-1.60242</td>
<td style="text-align: center;">4.26907</td>
<td style="text-align: center;">0.4801</td>
<td style="text-align: center;">0.576315</td>
<td style="text-align: center;">Quadrangle((x: 28.0 m, y: 11.0 m), ..., (x: 28.0 m, y: 12.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">-0.372589</td>
<td style="text-align: center;">1.60737</td>
<td style="text-align: center;">0.0553877</td>
<td style="text-align: center;">0.162267</td>
<td style="text-align: center;">Quadrangle((x: 3.0 m, y: 34.0 m), ..., (x: 3.0 m, y: 35.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">-0.00887262</td>
<td style="text-align: center;">1.91512</td>
<td style="text-align: center;">0.275965</td>
<td style="text-align: center;">-1.03454</td>
<td style="text-align: center;">Quadrangle((x: 0.0 m, y: 50.0 m), ..., (x: 0.0 m, y: 51.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">-0.115535</td>
<td style="text-align: center;">0.199133</td>
<td style="text-align: center;">2.60993</td>
<td style="text-align: center;">3.03919</td>
<td style="text-align: center;">Quadrangle((x: 14.0 m, y: 50.0 m), ..., (x: 14.0 m, y: 51.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">-0.575154</td>
<td style="text-align: center;">0.185452</td>
<td style="text-align: center;">1.25228</td>
<td style="text-align: center;">0.891701</td>
<td style="text-align: center;">Quadrangle((x: 22.0 m, y: 50.0 m), ..., (x: 22.0 m, y: 51.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">-1.68952</td>
<td style="text-align: center;">3.30748</td>
<td style="text-align: center;">-0.680957</td>
<td style="text-align: center;">-0.386975</td>
<td style="text-align: center;">Quadrangle((x: 26.0 m, y: 50.0 m), ..., (x: 26.0 m, y: 51.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">-1.22852</td>
<td style="text-align: center;">2.66335</td>
<td style="text-align: center;">0.0673469</td>
<td style="text-align: center;">-1.07548</td>
<td style="text-align: center;">Quadrangle((x: 32.0 m, y: 50.0 m), ..., (x: 32.0 m, y: 51.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">-0.292457</td>
<td style="text-align: center;">1.7194</td>
<td style="text-align: center;">0.803719</td>
<td style="text-align: center;">1.17264</td>
<td style="text-align: center;">Quadrangle((x: 34.0 m, y: 50.0 m), ..., (x: 34.0 m, y: 51.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">-1.30561</td>
<td style="text-align: center;">0.425733</td>
<td style="text-align: center;">-0.242989</td>
<td style="text-align: center;">-0.216096</td>
<td style="text-align: center;">Quadrangle((x: 40.0 m, y: 50.0 m), ..., (x: 40.0 m, y: 51.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">-1.32826</td>
<td style="text-align: center;">1.69498</td>
<td style="text-align: center;">0.917635</td>
<td style="text-align: center;">0.139973</td>
<td style="text-align: center;">Quadrangle((x: 43.0 m, y: 50.0 m), ..., (x: 43.0 m, y: 51.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>To sort rows based on specific columns we can use the <code>Sort</code> transform:</p>
<div id="6679a113" class="cell" data-execution_count="22">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>gt <span class="op">|&gt;</span> <span class="fu">Sort</span>(<span class="st">"a"</span>, <span class="st">"b"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="23">
<table class="caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<caption>10000×5 GeoTable over 10000 view(::CartesianGrid, [7149, 5746, 8213, 9642, ..., 1956, 262, 4170, 1286])</caption>
<thead>
<tr class="header">
<th style="text-align: center;" data-quarto-table-cell-role="th">a</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">b</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">c</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">d</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">geometry</th>
</tr>
<tr class="odd subheader">
<th style="text-align: center;" data-quarto-table-cell-role="th">Continuous</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Continuous</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Continuous</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Continuous</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Quadrangle</th>
</tr>
<tr class="header subheader headerLastRow">
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">🖈 Cartesian{NoDatum}</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">-3.63899</td>
<td style="text-align: center;">0.394024</td>
<td style="text-align: center;">-0.801697</td>
<td style="text-align: center;">-1.16775</td>
<td style="text-align: center;">Quadrangle((x: 48.0 m, y: 71.0 m), ..., (x: 48.0 m, y: 72.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">-3.50067</td>
<td style="text-align: center;">-1.9367</td>
<td style="text-align: center;">0.259675</td>
<td style="text-align: center;">-0.401779</td>
<td style="text-align: center;">Quadrangle((x: 45.0 m, y: 57.0 m), ..., (x: 45.0 m, y: 58.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">-3.48487</td>
<td style="text-align: center;">1.768</td>
<td style="text-align: center;">-0.551384</td>
<td style="text-align: center;">-1.24228</td>
<td style="text-align: center;">Quadrangle((x: 12.0 m, y: 82.0 m), ..., (x: 12.0 m, y: 83.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">-3.33707</td>
<td style="text-align: center;">-2.14707</td>
<td style="text-align: center;">-0.328337</td>
<td style="text-align: center;">0.216998</td>
<td style="text-align: center;">Quadrangle((x: 41.0 m, y: 96.0 m), ..., (x: 41.0 m, y: 97.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">-3.25001</td>
<td style="text-align: center;">-0.144306</td>
<td style="text-align: center;">-0.659719</td>
<td style="text-align: center;">-0.488719</td>
<td style="text-align: center;">Quadrangle((x: 70.0 m, y: 60.0 m), ..., (x: 70.0 m, y: 61.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">-3.06904</td>
<td style="text-align: center;">1.84524</td>
<td style="text-align: center;">0.687081</td>
<td style="text-align: center;">-0.112616</td>
<td style="text-align: center;">Quadrangle((x: 43.0 m, y: 86.0 m), ..., (x: 43.0 m, y: 87.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">-3.06336</td>
<td style="text-align: center;">-1.45777</td>
<td style="text-align: center;">-0.420263</td>
<td style="text-align: center;">-1.19406</td>
<td style="text-align: center;">Quadrangle((x: 73.0 m, y: 84.0 m), ..., (x: 73.0 m, y: 85.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">-3.03254</td>
<td style="text-align: center;">-2.18191</td>
<td style="text-align: center;">1.20712</td>
<td style="text-align: center;">0.650355</td>
<td style="text-align: center;">Quadrangle((x: 61.0 m, y: 99.0 m), ..., (x: 61.0 m, y: 100.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">-2.99562</td>
<td style="text-align: center;">-1.20528</td>
<td style="text-align: center;">0.432578</td>
<td style="text-align: center;">0.894593</td>
<td style="text-align: center;">Quadrangle((x: 47.0 m, y: 97.0 m), ..., (x: 47.0 m, y: 98.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">-2.97847</td>
<td style="text-align: center;">-0.189707</td>
<td style="text-align: center;">0.0186117</td>
<td style="text-align: center;">-0.0462021</td>
<td style="text-align: center;">Quadrangle((x: 69.0 m, y: 63.0 m), ..., (x: 69.0 m, y: 64.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>This transform accepts all options of the <code>sortperm</code> function in Julia, including the option to sort in reverse order:</p>
<div id="687051e6" class="cell" data-execution_count="23">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>gt <span class="op">|&gt;</span> <span class="fu">Sort</span>(<span class="st">"a"</span>, <span class="st">"b"</span>, rev<span class="op">=</span><span class="cn">true</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="24">
<table class="caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<caption>10000×5 GeoTable over 10000 view(::CartesianGrid, [1286, 4170, 262, 1956, ..., 9642, 8213, 5746, 7149])</caption>
<thead>
<tr class="header">
<th style="text-align: center;" data-quarto-table-cell-role="th">a</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">b</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">c</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">d</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">geometry</th>
</tr>
<tr class="odd subheader">
<th style="text-align: center;" data-quarto-table-cell-role="th">Continuous</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Continuous</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Continuous</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Continuous</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Quadrangle</th>
</tr>
<tr class="header subheader headerLastRow">
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">🖈 Cartesian{NoDatum}</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">14.3093</td>
<td style="text-align: center;">1.0435</td>
<td style="text-align: center;">0.0408489</td>
<td style="text-align: center;">0.199914</td>
<td style="text-align: center;">Quadrangle((x: 85.0 m, y: 12.0 m), ..., (x: 85.0 m, y: 13.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">13.2623</td>
<td style="text-align: center;">-3.28976</td>
<td style="text-align: center;">-1.12594</td>
<td style="text-align: center;">-1.68856</td>
<td style="text-align: center;">Quadrangle((x: 69.0 m, y: 41.0 m), ..., (x: 69.0 m, y: 42.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">12.5012</td>
<td style="text-align: center;">-2.12796</td>
<td style="text-align: center;">0.983209</td>
<td style="text-align: center;">0.384503</td>
<td style="text-align: center;">Quadrangle((x: 61.0 m, y: 2.0 m), ..., (x: 61.0 m, y: 3.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">12.4749</td>
<td style="text-align: center;">3.0946</td>
<td style="text-align: center;">1.42141</td>
<td style="text-align: center;">1.92931</td>
<td style="text-align: center;">Quadrangle((x: 55.0 m, y: 19.0 m), ..., (x: 55.0 m, y: 20.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">12.2061</td>
<td style="text-align: center;">2.08969</td>
<td style="text-align: center;">0.53313</td>
<td style="text-align: center;">0.197515</td>
<td style="text-align: center;">Quadrangle((x: 56.0 m, y: 1.0 m), ..., (x: 56.0 m, y: 2.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">11.9264</td>
<td style="text-align: center;">-0.6288</td>
<td style="text-align: center;">-1.13719</td>
<td style="text-align: center;">-1.05852</td>
<td style="text-align: center;">Quadrangle((x: 15.0 m, y: 8.0 m), ..., (x: 15.0 m, y: 9.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">11.8439</td>
<td style="text-align: center;">-0.945765</td>
<td style="text-align: center;">-1.13535</td>
<td style="text-align: center;">-1.95222</td>
<td style="text-align: center;">Quadrangle((x: 20.0 m, y: 45.0 m), ..., (x: 20.0 m, y: 46.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">11.7033</td>
<td style="text-align: center;">3.98643</td>
<td style="text-align: center;">-0.410006</td>
<td style="text-align: center;">0.183649</td>
<td style="text-align: center;">Quadrangle((x: 49.0 m, y: 35.0 m), ..., (x: 49.0 m, y: 36.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">11.6921</td>
<td style="text-align: center;">2.92786</td>
<td style="text-align: center;">0.169636</td>
<td style="text-align: center;">0.364216</td>
<td style="text-align: center;">Quadrangle((x: 68.0 m, y: 1.0 m), ..., (x: 68.0 m, y: 2.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">11.6715</td>
<td style="text-align: center;">2.02217</td>
<td style="text-align: center;">1.29547</td>
<td style="text-align: center;">1.39476</td>
<td style="text-align: center;">Quadrangle((x: 8.0 m, y: 0.0 m), ..., (x: 8.0 m, y: 1.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="cleaning" class="level3" data-number="5.2.2">
<h3 data-number="5.2.2" class="anchored" data-anchor-id="cleaning"><span class="header-section-number">5.2.2</span> Cleaning</h3>
<p>Some feature transforms are used to clean the data before geostatistical analysis. For example, the <code>StdNames</code> transform can be used to standardize variable names that are not very readable due to file format limitations. To illustrate this transform, let’s create a geotable with unreadable variable names:</p>
<div id="b3a471da" class="cell" data-execution_count="24">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>ut <span class="op">=</span> gt <span class="op">|&gt;</span> <span class="fu">Select</span>(<span class="st">"a"</span> <span class="op">=&gt;</span> <span class="st">"aBc De-F"</span>, <span class="st">"b"</span> <span class="op">=&gt;</span> <span class="st">"b_2 (1)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="25">
<table class="caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<caption>10000×3 GeoTable over 100×100 CartesianGrid</caption>
<thead>
<tr class="header">
<th style="text-align: center;" data-quarto-table-cell-role="th">aBc De-F</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">b_2 (1)</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">geometry</th>
</tr>
<tr class="odd subheader">
<th style="text-align: center;" data-quarto-table-cell-role="th">Continuous</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Continuous</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Quadrangle</th>
</tr>
<tr class="header subheader headerLastRow">
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">🖈 Cartesian{NoDatum}</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">4.88086</td>
<td style="text-align: center;">-0.824518</td>
<td style="text-align: center;">Quadrangle((x: 0.0 m, y: 0.0 m), ..., (x: 0.0 m, y: 1.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">8.4518</td>
<td style="text-align: center;">-1.05785</td>
<td style="text-align: center;">Quadrangle((x: 1.0 m, y: 0.0 m), ..., (x: 1.0 m, y: 1.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">8.0886</td>
<td style="text-align: center;">-0.48212</td>
<td style="text-align: center;">Quadrangle((x: 2.0 m, y: 0.0 m), ..., (x: 2.0 m, y: 1.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">6.67651</td>
<td style="text-align: center;">-0.838924</td>
<td style="text-align: center;">Quadrangle((x: 3.0 m, y: 0.0 m), ..., (x: 3.0 m, y: 1.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">4.984</td>
<td style="text-align: center;">-2.74721</td>
<td style="text-align: center;">Quadrangle((x: 4.0 m, y: 0.0 m), ..., (x: 4.0 m, y: 1.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">5.59319</td>
<td style="text-align: center;">4.10399</td>
<td style="text-align: center;">Quadrangle((x: 5.0 m, y: 0.0 m), ..., (x: 5.0 m, y: 1.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">8.07717</td>
<td style="text-align: center;">0.0601576</td>
<td style="text-align: center;">Quadrangle((x: 6.0 m, y: 0.0 m), ..., (x: 6.0 m, y: 1.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">6.73127</td>
<td style="text-align: center;">-5.16782</td>
<td style="text-align: center;">Quadrangle((x: 7.0 m, y: 0.0 m), ..., (x: 7.0 m, y: 1.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">11.6715</td>
<td style="text-align: center;">2.02217</td>
<td style="text-align: center;">Quadrangle((x: 8.0 m, y: 0.0 m), ..., (x: 8.0 m, y: 1.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">6.25012</td>
<td style="text-align: center;">-0.387327</td>
<td style="text-align: center;">Quadrangle((x: 9.0 m, y: 0.0 m), ..., (x: 9.0 m, y: 1.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>We can standardize the names with:</p>
<div id="daaa0e45" class="cell" data-execution_count="25">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>ut <span class="op">|&gt;</span> <span class="fu">StdNames</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="26">
<table class="caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<caption>10000×3 GeoTable over 100×100 CartesianGrid</caption>
<thead>
<tr class="header">
<th style="text-align: center;" data-quarto-table-cell-role="th">ABC_DE_F</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">B_2_1</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">geometry</th>
</tr>
<tr class="odd subheader">
<th style="text-align: center;" data-quarto-table-cell-role="th">Continuous</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Continuous</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Quadrangle</th>
</tr>
<tr class="header subheader headerLastRow">
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">🖈 Cartesian{NoDatum}</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">4.88086</td>
<td style="text-align: center;">-0.824518</td>
<td style="text-align: center;">Quadrangle((x: 0.0 m, y: 0.0 m), ..., (x: 0.0 m, y: 1.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">8.4518</td>
<td style="text-align: center;">-1.05785</td>
<td style="text-align: center;">Quadrangle((x: 1.0 m, y: 0.0 m), ..., (x: 1.0 m, y: 1.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">8.0886</td>
<td style="text-align: center;">-0.48212</td>
<td style="text-align: center;">Quadrangle((x: 2.0 m, y: 0.0 m), ..., (x: 2.0 m, y: 1.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">6.67651</td>
<td style="text-align: center;">-0.838924</td>
<td style="text-align: center;">Quadrangle((x: 3.0 m, y: 0.0 m), ..., (x: 3.0 m, y: 1.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">4.984</td>
<td style="text-align: center;">-2.74721</td>
<td style="text-align: center;">Quadrangle((x: 4.0 m, y: 0.0 m), ..., (x: 4.0 m, y: 1.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">5.59319</td>
<td style="text-align: center;">4.10399</td>
<td style="text-align: center;">Quadrangle((x: 5.0 m, y: 0.0 m), ..., (x: 5.0 m, y: 1.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">8.07717</td>
<td style="text-align: center;">0.0601576</td>
<td style="text-align: center;">Quadrangle((x: 6.0 m, y: 0.0 m), ..., (x: 6.0 m, y: 1.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">6.73127</td>
<td style="text-align: center;">-5.16782</td>
<td style="text-align: center;">Quadrangle((x: 7.0 m, y: 0.0 m), ..., (x: 7.0 m, y: 1.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">11.6715</td>
<td style="text-align: center;">2.02217</td>
<td style="text-align: center;">Quadrangle((x: 8.0 m, y: 0.0 m), ..., (x: 8.0 m, y: 1.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">6.25012</td>
<td style="text-align: center;">-0.387327</td>
<td style="text-align: center;">Quadrangle((x: 9.0 m, y: 0.0 m), ..., (x: 9.0 m, y: 1.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>By default the transform, uses the <code>:uppersnake</code> naming convention. Other conventions can be specified depending on personal preference:</p>
<div id="a38eab14" class="cell" data-execution_count="26">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>ut <span class="op">|&gt;</span> <span class="fu">StdNames</span>(<span class="op">:</span>uppercamel)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="27">
<table class="caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<caption>10000×3 GeoTable over 100×100 CartesianGrid</caption>
<thead>
<tr class="header">
<th style="text-align: center;" data-quarto-table-cell-role="th">AbcDeF</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">B21</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">geometry</th>
</tr>
<tr class="odd subheader">
<th style="text-align: center;" data-quarto-table-cell-role="th">Continuous</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Continuous</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Quadrangle</th>
</tr>
<tr class="header subheader headerLastRow">
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">🖈 Cartesian{NoDatum}</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">4.88086</td>
<td style="text-align: center;">-0.824518</td>
<td style="text-align: center;">Quadrangle((x: 0.0 m, y: 0.0 m), ..., (x: 0.0 m, y: 1.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">8.4518</td>
<td style="text-align: center;">-1.05785</td>
<td style="text-align: center;">Quadrangle((x: 1.0 m, y: 0.0 m), ..., (x: 1.0 m, y: 1.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">8.0886</td>
<td style="text-align: center;">-0.48212</td>
<td style="text-align: center;">Quadrangle((x: 2.0 m, y: 0.0 m), ..., (x: 2.0 m, y: 1.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">6.67651</td>
<td style="text-align: center;">-0.838924</td>
<td style="text-align: center;">Quadrangle((x: 3.0 m, y: 0.0 m), ..., (x: 3.0 m, y: 1.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">4.984</td>
<td style="text-align: center;">-2.74721</td>
<td style="text-align: center;">Quadrangle((x: 4.0 m, y: 0.0 m), ..., (x: 4.0 m, y: 1.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">5.59319</td>
<td style="text-align: center;">4.10399</td>
<td style="text-align: center;">Quadrangle((x: 5.0 m, y: 0.0 m), ..., (x: 5.0 m, y: 1.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">8.07717</td>
<td style="text-align: center;">0.0601576</td>
<td style="text-align: center;">Quadrangle((x: 6.0 m, y: 0.0 m), ..., (x: 6.0 m, y: 1.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">6.73127</td>
<td style="text-align: center;">-5.16782</td>
<td style="text-align: center;">Quadrangle((x: 7.0 m, y: 0.0 m), ..., (x: 7.0 m, y: 1.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">11.6715</td>
<td style="text-align: center;">2.02217</td>
<td style="text-align: center;">Quadrangle((x: 8.0 m, y: 0.0 m), ..., (x: 8.0 m, y: 1.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">6.25012</td>
<td style="text-align: center;">-0.387327</td>
<td style="text-align: center;">Quadrangle((x: 9.0 m, y: 0.0 m), ..., (x: 9.0 m, y: 1.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="ef120132" class="cell" data-execution_count="27">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>ut <span class="op">|&gt;</span> <span class="fu">StdNames</span>(<span class="op">:</span>upperflat)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="28">
<table class="caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<caption>10000×3 GeoTable over 100×100 CartesianGrid</caption>
<thead>
<tr class="header">
<th style="text-align: center;" data-quarto-table-cell-role="th">ABCDEF</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">B21</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">geometry</th>
</tr>
<tr class="odd subheader">
<th style="text-align: center;" data-quarto-table-cell-role="th">Continuous</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Continuous</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Quadrangle</th>
</tr>
<tr class="header subheader headerLastRow">
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">🖈 Cartesian{NoDatum}</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">4.88086</td>
<td style="text-align: center;">-0.824518</td>
<td style="text-align: center;">Quadrangle((x: 0.0 m, y: 0.0 m), ..., (x: 0.0 m, y: 1.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">8.4518</td>
<td style="text-align: center;">-1.05785</td>
<td style="text-align: center;">Quadrangle((x: 1.0 m, y: 0.0 m), ..., (x: 1.0 m, y: 1.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">8.0886</td>
<td style="text-align: center;">-0.48212</td>
<td style="text-align: center;">Quadrangle((x: 2.0 m, y: 0.0 m), ..., (x: 2.0 m, y: 1.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">6.67651</td>
<td style="text-align: center;">-0.838924</td>
<td style="text-align: center;">Quadrangle((x: 3.0 m, y: 0.0 m), ..., (x: 3.0 m, y: 1.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">4.984</td>
<td style="text-align: center;">-2.74721</td>
<td style="text-align: center;">Quadrangle((x: 4.0 m, y: 0.0 m), ..., (x: 4.0 m, y: 1.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">5.59319</td>
<td style="text-align: center;">4.10399</td>
<td style="text-align: center;">Quadrangle((x: 5.0 m, y: 0.0 m), ..., (x: 5.0 m, y: 1.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">8.07717</td>
<td style="text-align: center;">0.0601576</td>
<td style="text-align: center;">Quadrangle((x: 6.0 m, y: 0.0 m), ..., (x: 6.0 m, y: 1.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">6.73127</td>
<td style="text-align: center;">-5.16782</td>
<td style="text-align: center;">Quadrangle((x: 7.0 m, y: 0.0 m), ..., (x: 7.0 m, y: 1.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">11.6715</td>
<td style="text-align: center;">2.02217</td>
<td style="text-align: center;">Quadrangle((x: 8.0 m, y: 0.0 m), ..., (x: 8.0 m, y: 1.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">6.25012</td>
<td style="text-align: center;">-0.387327</td>
<td style="text-align: center;">Quadrangle((x: 9.0 m, y: 0.0 m), ..., (x: 9.0 m, y: 1.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>The <code>Replace</code> transform can be used to replace specific values in the geotable by new values that are meaningful to the analysis. For example, we can replace the values <code>-999</code> and <code>NaN</code> that are used to represent <code>missing</code> values in some file formats:</p>
<div id="9754423f" class="cell" data-execution_count="28">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>rt <span class="op">=</span> <span class="fu">georef</span>((a<span class="op">=</span>[<span class="fl">1</span>,<span class="op">-</span><span class="fl">999</span>,<span class="fl">3</span>], b<span class="op">=</span>[<span class="cn">NaN</span>,<span class="fl">5</span>,<span class="fl">6</span>]))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="29">
<table class="caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<caption>3×3 GeoTable over 3 CartesianGrid</caption>
<thead>
<tr class="header">
<th style="text-align: center;" data-quarto-table-cell-role="th">a</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">b</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">geometry</th>
</tr>
<tr class="odd subheader">
<th style="text-align: center;" data-quarto-table-cell-role="th">Categorical</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Continuous</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Segment</th>
</tr>
<tr class="header subheader headerLastRow">
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">🖈 Cartesian{NoDatum}</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">1</td>
<td style="text-align: center;">NaN</td>
<td style="text-align: center;">Segment((x: 0.0 m), (x: 1.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">-999</td>
<td style="text-align: center;">5.0</td>
<td style="text-align: center;">Segment((x: 1.0 m), (x: 2.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">3</td>
<td style="text-align: center;">6.0</td>
<td style="text-align: center;">Segment((x: 2.0 m), (x: 3.0 m))</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="b5e2e235" class="cell" data-execution_count="29">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>rt <span class="op">|&gt;</span> <span class="fu">Replace</span>(<span class="op">-</span><span class="fl">999</span> <span class="op">=&gt;</span> <span class="cn">missing</span>, <span class="cn">NaN</span> <span class="op">=&gt;</span> <span class="cn">missing</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="30">
<table class="caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<caption>3×3 GeoTable over 3 CartesianGrid</caption>
<thead>
<tr class="header">
<th style="text-align: center;" data-quarto-table-cell-role="th">a</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">b</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">geometry</th>
</tr>
<tr class="odd subheader">
<th style="text-align: center;" data-quarto-table-cell-role="th">Categorical</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Continuous</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Segment</th>
</tr>
<tr class="header subheader headerLastRow">
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">🖈 Cartesian{NoDatum}</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">1</td>
<td style="text-align: center;">missing</td>
<td style="text-align: center;">Segment((x: 0.0 m), (x: 1.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">missing</td>
<td style="text-align: center;">5.0</td>
<td style="text-align: center;">Segment((x: 1.0 m), (x: 2.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">3</td>
<td style="text-align: center;">6.0</td>
<td style="text-align: center;">Segment((x: 2.0 m), (x: 3.0 m))</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>or replace all negative values using a predicate function:</p>
<div id="4afdb2f6" class="cell" data-execution_count="30">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>rt <span class="op">|&gt;</span> <span class="fu">Replace</span>(<span class="fu">&lt;</span>(<span class="fl">0</span>) <span class="op">=&gt;</span> <span class="cn">missing</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="31">
<table class="caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<caption>3×3 GeoTable over 3 CartesianGrid</caption>
<thead>
<tr class="header">
<th style="text-align: center;" data-quarto-table-cell-role="th">a</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">b</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">geometry</th>
</tr>
<tr class="odd subheader">
<th style="text-align: center;" data-quarto-table-cell-role="th">Categorical</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Continuous</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Segment</th>
</tr>
<tr class="header subheader headerLastRow">
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">🖈 Cartesian{NoDatum}</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">1</td>
<td style="text-align: center;">NaN</td>
<td style="text-align: center;">Segment((x: 0.0 m), (x: 1.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">missing</td>
<td style="text-align: center;">5.0</td>
<td style="text-align: center;">Segment((x: 1.0 m), (x: 2.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">3</td>
<td style="text-align: center;">6.0</td>
<td style="text-align: center;">Segment((x: 2.0 m), (x: 3.0 m))</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>In Julia, the expression <code>&lt;(0)</code> is equivalent to the predicate function <code>x -&gt; x &lt; 0</code>.</p>
</div>
</div>
<p>Although <code>Replace</code> could be used to replace <code>missing</code> values by new values, there is a specific transform for this purpose named <code>Coalesce</code>:</p>
<div id="bc7d40d1" class="cell" data-execution_count="31">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>ct <span class="op">=</span> <span class="fu">georef</span>((a<span class="op">=</span>[<span class="fl">1</span>,<span class="cn">missing</span>,<span class="fl">3</span>], b<span class="op">=</span>[<span class="fl">4</span>,<span class="fl">5</span>,<span class="fl">6</span>])) <span class="op">|&gt;</span> <span class="fu">Coalesce</span>(value<span class="op">=</span><span class="fl">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="32">
<table class="caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<caption>3×3 GeoTable over 3 CartesianGrid</caption>
<thead>
<tr class="header">
<th style="text-align: center;" data-quarto-table-cell-role="th">a</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">b</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">geometry</th>
</tr>
<tr class="odd subheader">
<th style="text-align: center;" data-quarto-table-cell-role="th">Categorical</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Categorical</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Segment</th>
</tr>
<tr class="header subheader headerLastRow">
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">🖈 Cartesian{NoDatum}</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">1</td>
<td style="text-align: center;">4</td>
<td style="text-align: center;">Segment((x: 0.0 m), (x: 1.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">2</td>
<td style="text-align: center;">5</td>
<td style="text-align: center;">Segment((x: 1.0 m), (x: 2.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">3</td>
<td style="text-align: center;">6</td>
<td style="text-align: center;">Segment((x: 2.0 m), (x: 3.0 m))</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Unlike <code>Replace</code>, the <code>Coalesce</code> transform also changes the column type to make sure that no <code>missing</code> values can be stored in the future:</p>
<div id="63d69519" class="cell" data-execution_count="32">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(ct.a)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="33">
<div class="ansi-escaped-output">
<pre>Vector{Int64}<span class="ansi-bright-black-fg"> (alias for </span><span class="ansi-bright-black-fg">Array{Int64, 1}</span><span class="ansi-bright-black-fg">)</span></pre>
</div>
</div>
</div>
</div>
</div>
<p>In many applications, it is enough to simply drop all rows for which the selected column values are <code>missing</code>. This is the purpose of the <code>DropMissing</code> transform:</p>
<div id="95a32d40" class="cell" data-execution_count="33">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">georef</span>((a<span class="op">=</span>[<span class="fl">1</span>,<span class="cn">missing</span>,<span class="fl">3</span>], b<span class="op">=</span>[<span class="fl">4</span>,<span class="fl">5</span>,<span class="fl">6</span>])) <span class="op">|&gt;</span> <span class="fu">DropMissing</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="34">
<table class="caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<caption>2×3 GeoTable over 2 view(::CartesianGrid, [1, 3])</caption>
<thead>
<tr class="header">
<th style="text-align: center;" data-quarto-table-cell-role="th">a</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">b</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">geometry</th>
</tr>
<tr class="odd subheader">
<th style="text-align: center;" data-quarto-table-cell-role="th">Categorical</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Categorical</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Segment</th>
</tr>
<tr class="header subheader headerLastRow">
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">🖈 Cartesian{NoDatum}</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">1</td>
<td style="text-align: center;">4</td>
<td style="text-align: center;">Segment((x: 0.0 m), (x: 1.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">3</td>
<td style="text-align: center;">6</td>
<td style="text-align: center;">Segment((x: 2.0 m), (x: 3.0 m))</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>The <code>DropNaN</code> is an alternative to drop all rows for which the selected column values are <code>NaN</code>.</p>
</section>
<section id="statistical" class="level3" data-number="5.2.3">
<h3 data-number="5.2.3" class="anchored" data-anchor-id="statistical"><span class="header-section-number">5.2.3</span> Statistical</h3>
<p>The framework provides various feature transforms for statistical analysis. We will cover some of these transforms in more detail in <strong>Part V</strong> of the book with real data. In the following examples we illustrate the most basic statistical transforms with synthetic data.</p>
<p>The <code>Sample</code> transform can be used to sample rows of the geotable at random, with or without replacement depending on the <code>replace</code> option. Other options are available such as <code>rng</code> to set the random number generator and <code>ordered</code> to preserve the order of rows in the original geotable:</p>
<div id="321fd542" class="cell" data-execution_count="34">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>gt <span class="op">|&gt;</span> <span class="fu">Sample</span>(<span class="fl">1000</span>, replace<span class="op">=</span><span class="cn">false</span>) <span class="op">|&gt;</span> viewer</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>┌ Warning: Found `resolution` in the theme when creating a `Scene`. The `resolution` keyword for `Scene`s and `Figure`s has been deprecated. Use `Figure(; size = ...` or `Scene(; size = ...)` instead, which better reflects that this is a unitless size and not a pixel resolution. The key could also come from `set_theme!` calls or related theming functions.
└ @ Makie ~/.julia/packages/Makie/We6MY/src/scenes.jl:227</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="35">
<div>
<figure class="figure">
<p><img src="05-transforms_files/figure-html/cell-35-output-2.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Similar to <code>Filter</code> and <code>Sort</code>, the <code>Sample</code> transform is lazy. It simply stores the indices of sampled rows for future construction of the new geotable.</p>
</div>
</div>
<p>The <code>Center</code> and <code>Scale</code> transforms can be used to standardize the range of values in a geotable. Aliases are provided for specific types of <code>Scale</code> such as <code>MinMax</code> and <code>Interquartile</code>. We can use the <code>describe</code> function to visualize basic statistics before and after the transforms:</p>
<div id="e7a613f8" class="cell" data-execution_count="35">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>gt <span class="op">|&gt;</span> describe</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="36">
<pre><code>Table with 6 columns and 4 rows:
     variable  mean         minimum   median      maximum  nmissing
   ┌───────────────────────────────────────────────────────────────
 1 │ a         2.99681      -3.63899  2.0039      14.3093  0
 2 │ b         -0.017348    -9.85746  0.0110872   11.3308  0
 3 │ c         -0.0091584   -3.99574  -0.01266    3.61275  0
 4 │ d         -0.00646136  -4.31146  0.00468325  3.96171  0</code></pre>
</div>
</div>
<div id="84f152a3" class="cell" data-execution_count="36">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>gt <span class="op">|&gt;</span> <span class="fu">Center</span>(<span class="st">"a"</span>) <span class="op">|&gt;</span> describe</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="37">
<pre><code>Table with 6 columns and 4 rows:
     variable  mean         minimum   median      maximum  nmissing
   ┌───────────────────────────────────────────────────────────────
 1 │ a         1.81899e-16  -6.6358   -0.992908   11.3125  0
 2 │ b         -0.017348    -9.85746  0.0110872   11.3308  0
 3 │ c         -0.0091584   -3.99574  -0.01266    3.61275  0
 4 │ d         -0.00646136  -4.31146  0.00468325  3.96171  0</code></pre>
</div>
</div>
<div id="71327de7" class="cell" data-execution_count="37">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>gt <span class="op">|&gt;</span> <span class="fu">MinMax</span>() <span class="op">|&gt;</span> describe</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="38">
<pre><code>Table with 6 columns and 4 rows:
     variable  mean      minimum  median    maximum  nmissing
   ┌─────────────────────────────────────────────────────────
 1 │ a         0.369718  0.0      0.314397  1.0      0
 2 │ b         0.464413  0.0      0.465755  1.0      0
 3 │ c         0.523965  0.0      0.523505  1.0      0
 4 │ d         0.520357  0.0      0.521704  1.0      0</code></pre>
</div>
</div>
<p>The <code>ZScore</code> transform is similar to the <code>Scale</code> transform, but it uses the mean and the standard deviation to standardize the range:</p>
<div id="51b8294e" class="cell" data-execution_count="38">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>gt <span class="op">|&gt;</span> <span class="fu">ZScore</span>() <span class="op">|&gt;</span> describe</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="39">
<pre><code>Table with 6 columns and 4 rows:
     variable  mean          minimum   median       maximum  nmissing
   ┌─────────────────────────────────────────────────────────────────
 1 │ a         9.09495e-17   -1.95327  -0.292265    3.32987  0
 2 │ b         1.42109e-18   -3.83916  0.0110941    4.42753  0
 3 │ c         2.62901e-17   -3.99801  -0.00351165  3.63229  0
 4 │ d         -2.77112e-17  -3.73079  0.00965811   3.43888  0</code></pre>
</div>
</div>
<p>Another important univariate transform is the <code>Quantile</code> transform, which can be used to convert empirical distribution in a column of the geotable to any given distribution from <a href="https://github.com/JuliaStats/Distributions.jl">Distributions.jl</a> by <span class="citation" data-cites="Lin2023">Lin et al. (<a href="references.html#ref-Lin2023" role="doc-biblioref">2023</a>)</span>. Selected columns are converted to a <code>Normal</code> distribution by default, but more than 60 distributions are available:</p>
<div id="f1e39268" class="cell" data-execution_count="39">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>gt <span class="op">|&gt;</span> <span class="fu">Quantile</span>() <span class="op">|&gt;</span> values <span class="op">|&gt;</span> pairplot</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>┌ Warning: Found `resolution` in the theme when creating a `Scene`. The `resolution` keyword for `Scene`s and `Figure`s has been deprecated. Use `Figure(; size = ...` or `Scene(; size = ...)` instead, which better reflects that this is a unitless size and not a pixel resolution. The key could also come from `set_theme!` calls or related theming functions.
└ @ Makie ~/.julia/packages/Makie/We6MY/src/scenes.jl:227</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="40">
<div>
<figure class="figure">
<p><img src="05-transforms_files/figure-html/cell-40-output-2.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>In data science, scientific traits are used to link data types to adequate statistical algorithms. The most popular scientific traits encountered in geoscientific applications are the <code>Continuous</code> and the <code>Categorical</code> scientific traits. To convert (or coerce) the scientific traits of columns in a geotable, we can use the <code>Coerce</code> transform:</p>
<div id="3a14168e" class="cell" data-execution_count="40">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">GeoStats.DataScienceTraits</span>: Continuous</span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>st <span class="op">=</span> <span class="fu">georef</span>((a<span class="op">=</span>[<span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">2</span>,<span class="fl">2</span>,<span class="fl">3</span>,<span class="fl">3</span>], b<span class="op">=</span>[<span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">3</span>,<span class="fl">4</span>,<span class="fl">5</span>,<span class="fl">6</span>])) <span class="op">|&gt;</span> <span class="fu">Coerce</span>(<span class="st">"b"</span> <span class="op">=&gt;</span> Continuous)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="41">
<table class="caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<caption>6×3 GeoTable over 6 CartesianGrid</caption>
<thead>
<tr class="header">
<th style="text-align: center;" data-quarto-table-cell-role="th">a</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">b</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">geometry</th>
</tr>
<tr class="odd subheader">
<th style="text-align: center;" data-quarto-table-cell-role="th">Categorical</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Continuous</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Segment</th>
</tr>
<tr class="header subheader headerLastRow">
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">🖈 Cartesian{NoDatum}</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">1</td>
<td style="text-align: center;">1.0</td>
<td style="text-align: center;">Segment((x: 0.0 m), (x: 1.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">2</td>
<td style="text-align: center;">2.0</td>
<td style="text-align: center;">Segment((x: 1.0 m), (x: 2.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">2</td>
<td style="text-align: center;">3.0</td>
<td style="text-align: center;">Segment((x: 2.0 m), (x: 3.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">2</td>
<td style="text-align: center;">4.0</td>
<td style="text-align: center;">Segment((x: 3.0 m), (x: 4.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">3</td>
<td style="text-align: center;">5.0</td>
<td style="text-align: center;">Segment((x: 4.0 m), (x: 5.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">3</td>
<td style="text-align: center;">6.0</td>
<td style="text-align: center;">Segment((x: 5.0 m), (x: 6.0 m))</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="593498b8" class="cell" data-execution_count="41">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="fu">eltype</span>(st.b)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="42">
<pre><code>Float64</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>All scientific traits are documented in the <a href="https://github.com/JuliaML/DataScienceTraits.jl">DataScienceTraits.jl</a> module.</p>
</div>
</div>
<p>The <code>Levels</code> transform can be used to adjust the categories (or levels) of <code>Categorical</code> columns in case the sampling process does not include all possible values:</p>
<div id="7b2188c0" class="cell" data-execution_count="42">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>st <span class="op">=</span> st <span class="op">|&gt;</span> <span class="fu">Levels</span>(<span class="st">"a"</span> <span class="op">=&gt;</span> [<span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">3</span>,<span class="fl">4</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="43">
<table class="caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<caption>6×3 GeoTable over 6 CartesianGrid</caption>
<thead>
<tr class="header">
<th style="text-align: center;" data-quarto-table-cell-role="th">a</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">b</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">geometry</th>
</tr>
<tr class="odd subheader">
<th style="text-align: center;" data-quarto-table-cell-role="th">Categorical</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Continuous</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Segment</th>
</tr>
<tr class="header subheader headerLastRow">
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">🖈 Cartesian{NoDatum}</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">1</td>
<td style="text-align: center;">1.0</td>
<td style="text-align: center;">Segment((x: 0.0 m), (x: 1.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">2</td>
<td style="text-align: center;">2.0</td>
<td style="text-align: center;">Segment((x: 1.0 m), (x: 2.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">2</td>
<td style="text-align: center;">3.0</td>
<td style="text-align: center;">Segment((x: 2.0 m), (x: 3.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">2</td>
<td style="text-align: center;">4.0</td>
<td style="text-align: center;">Segment((x: 3.0 m), (x: 4.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">3</td>
<td style="text-align: center;">5.0</td>
<td style="text-align: center;">Segment((x: 4.0 m), (x: 5.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">3</td>
<td style="text-align: center;">6.0</td>
<td style="text-align: center;">Segment((x: 5.0 m), (x: 6.0 m))</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="8e808f07" class="cell" data-execution_count="43">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(st.a)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="44">
<pre><code>4-element Vector{Int64}:
 1
 2
 3
 4</code></pre>
</div>
</div>
<p>Another popular transform in statistical learning is the <code>OneHot</code> transform. It converts a <code>Categorical</code> column into multiple columns of <code>true</code>/<code>false</code> values, one column for each level:</p>
<div id="2fd89678" class="cell" data-execution_count="44">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>st <span class="op">|&gt;</span> <span class="fu">OneHot</span>(<span class="st">"a"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="45">
<table class="caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<caption>6×6 GeoTable over 6 CartesianGrid</caption>
<thead>
<tr class="header">
<th style="text-align: center;" data-quarto-table-cell-role="th">a_1</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">a_2</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">a_3</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">a_4</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">b</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">geometry</th>
</tr>
<tr class="odd subheader">
<th style="text-align: center;" data-quarto-table-cell-role="th">Categorical</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Categorical</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Categorical</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Categorical</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Continuous</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Segment</th>
</tr>
<tr class="header subheader headerLastRow">
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">🖈 Cartesian{NoDatum}</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">true</td>
<td style="text-align: center;">false</td>
<td style="text-align: center;">false</td>
<td style="text-align: center;">false</td>
<td style="text-align: center;">1.0</td>
<td style="text-align: center;">Segment((x: 0.0 m), (x: 1.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">false</td>
<td style="text-align: center;">true</td>
<td style="text-align: center;">false</td>
<td style="text-align: center;">false</td>
<td style="text-align: center;">2.0</td>
<td style="text-align: center;">Segment((x: 1.0 m), (x: 2.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">false</td>
<td style="text-align: center;">true</td>
<td style="text-align: center;">false</td>
<td style="text-align: center;">false</td>
<td style="text-align: center;">3.0</td>
<td style="text-align: center;">Segment((x: 2.0 m), (x: 3.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">false</td>
<td style="text-align: center;">true</td>
<td style="text-align: center;">false</td>
<td style="text-align: center;">false</td>
<td style="text-align: center;">4.0</td>
<td style="text-align: center;">Segment((x: 3.0 m), (x: 4.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">false</td>
<td style="text-align: center;">false</td>
<td style="text-align: center;">true</td>
<td style="text-align: center;">false</td>
<td style="text-align: center;">5.0</td>
<td style="text-align: center;">Segment((x: 4.0 m), (x: 5.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">false</td>
<td style="text-align: center;">false</td>
<td style="text-align: center;">true</td>
<td style="text-align: center;">false</td>
<td style="text-align: center;">6.0</td>
<td style="text-align: center;">Segment((x: 5.0 m), (x: 6.0 m))</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>A similar transform for <code>Continuous</code> columns is the <code>Indicator</code> transform. It converts the column into multiple columns based on threshold values on the support of the data. By default, the threshold values are computed on a quantile <code>scale</code>:</p>
<div id="2c83f2b2" class="cell" data-execution_count="45">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>st <span class="op">|&gt;</span> <span class="fu">Indicator</span>(<span class="st">"b"</span>, k<span class="op">=</span><span class="fl">3</span>, scale<span class="op">=:</span>quantile)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="46">
<table class="caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<caption>6×5 GeoTable over 6 CartesianGrid</caption>
<thead>
<tr class="header">
<th style="text-align: center;" data-quarto-table-cell-role="th">a</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">b_1</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">b_2</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">b_3</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">geometry</th>
</tr>
<tr class="odd subheader">
<th style="text-align: center;" data-quarto-table-cell-role="th">Categorical</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Categorical</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Categorical</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Categorical</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Segment</th>
</tr>
<tr class="header subheader headerLastRow">
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">🖈 Cartesian{NoDatum}</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">1</td>
<td style="text-align: center;">true</td>
<td style="text-align: center;">true</td>
<td style="text-align: center;">true</td>
<td style="text-align: center;">Segment((x: 0.0 m), (x: 1.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">2</td>
<td style="text-align: center;">true</td>
<td style="text-align: center;">true</td>
<td style="text-align: center;">true</td>
<td style="text-align: center;">Segment((x: 1.0 m), (x: 2.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">2</td>
<td style="text-align: center;">false</td>
<td style="text-align: center;">true</td>
<td style="text-align: center;">true</td>
<td style="text-align: center;">Segment((x: 2.0 m), (x: 3.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">2</td>
<td style="text-align: center;">false</td>
<td style="text-align: center;">true</td>
<td style="text-align: center;">true</td>
<td style="text-align: center;">Segment((x: 3.0 m), (x: 4.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">3</td>
<td style="text-align: center;">false</td>
<td style="text-align: center;">false</td>
<td style="text-align: center;">true</td>
<td style="text-align: center;">Segment((x: 4.0 m), (x: 5.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">3</td>
<td style="text-align: center;">false</td>
<td style="text-align: center;">false</td>
<td style="text-align: center;">true</td>
<td style="text-align: center;">Segment((x: 5.0 m), (x: 6.0 m))</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>More advanced statistical transforms such as <code>EigenAnalysis</code>, <code>PCA</code>, <code>DRS</code>, <code>SDS</code>, <code>ProjectionPursuit</code> for multivariate data analysis and <code>Remainder</code>, <code>Closure</code>, <code>LogRatio</code>, <code>ALR</code>, <code>CLR</code>, <code>ILR</code> for compositional data analysis will be covered in future chapters.</p>
</section>
</section>
<section id="geometric-transforms" class="level2" data-number="5.3">
<h2 data-number="5.3" class="anchored" data-anchor-id="geometric-transforms"><span class="header-section-number">5.3</span> Geometric transforms</h2>
<p>While feature transforms operate on the <code>values</code> of the geotable, geometric transforms operate on the geospatial <code>domain</code>. The framework provides various geometric transforms for 2D and 3D space.</p>
<section id="coordinate" class="level3" data-number="5.3.1">
<h3 data-number="5.3.1" class="anchored" data-anchor-id="coordinate"><span class="header-section-number">5.3.1</span> Coordinate</h3>
<p>A coordinate transform is a geometric transform that modifies the coordinates of all points in the domain without any advanced topological modification (i.e., connectivities are preserved). The most prominent examples of coordinate transforms are <code>Translate</code>, <code>Rotate</code> and <code>Scale</code>.</p>
<p>Let’s load an additional geotable to see these transforms in action:</p>
<div id="aadd0a56" class="cell" data-execution_count="46">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">GeoIO</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>bt <span class="op">=</span> GeoIO.<span class="fu">load</span>(<span class="st">"data/beethoven.ply"</span>)</span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a><span class="fu">viz</span>(bt.geometry)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>┌ Warning: Found `resolution` in the theme when creating a `Scene`. The `resolution` keyword for `Scene`s and `Figure`s has been deprecated. Use `Figure(; size = ...` or `Scene(; size = ...)` instead, which better reflects that this is a unitless size and not a pixel resolution. The key could also come from `set_theme!` calls or related theming functions.
└ @ Makie ~/.julia/packages/Makie/We6MY/src/scenes.jl:227</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="47">
<div>
<figure class="figure">
<p><img src="05-transforms_files/figure-html/cell-47-output-2.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>The Beethoven domain has been saved in the <code>.ply</code> file in a position that is not ideal for visualization. We can rotate this domain with any active rotation specification from <a href="https://github.com/JuliaGeometry/Rotations.jl">Rotations.jl</a> by <span class="citation" data-cites="Koolen2023">Koolen et al. (<a href="references.html#ref-Koolen2023" role="doc-biblioref">2023</a>)</span> to improve the visualization. For example, we can specify that we want to rotate all points in the mesh by analogy with a rotation between coordinates <code>(0, 1, 0)</code> and coordinates <code>(0, 0, 1)</code>:</p>
<div id="68a360ad" class="cell" data-execution_count="47">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>rt <span class="op">=</span> bt <span class="op">|&gt;</span> <span class="fu">Rotate</span>((<span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">0</span>), (<span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">1</span>))</span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a><span class="fu">viz</span>(rt.geometry)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>┌ Warning: Found `resolution` in the theme when creating a `Scene`. The `resolution` keyword for `Scene`s and `Figure`s has been deprecated. Use `Figure(; size = ...` or `Scene(; size = ...)` instead, which better reflects that this is a unitless size and not a pixel resolution. The key could also come from `set_theme!` calls or related theming functions.
└ @ Makie ~/.julia/packages/Makie/We6MY/src/scenes.jl:227</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="48">
<div>
<figure class="figure">
<p><img src="05-transforms_files/figure-html/cell-48-output-2.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Beethoven is now standing up, but still facing the wall. Let’s rotate it once again by analogy between coordinates <code>(1, 0, 0)</code> and <code>(-1, 1, 0)</code>:</p>
<div id="c927a388" class="cell" data-execution_count="48">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>rt <span class="op">=</span> rt <span class="op">|&gt;</span> <span class="fu">Rotate</span>((<span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">0</span>), (<span class="op">-</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">0</span>))</span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a><span class="fu">viz</span>(rt.geometry)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>┌ Warning: Found `resolution` in the theme when creating a `Scene`. The `resolution` keyword for `Scene`s and `Figure`s has been deprecated. Use `Figure(; size = ...` or `Scene(; size = ...)` instead, which better reflects that this is a unitless size and not a pixel resolution. The key could also come from `set_theme!` calls or related theming functions.
└ @ Makie ~/.julia/packages/Makie/We6MY/src/scenes.jl:227</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="49">
<div>
<figure class="figure">
<p><img src="05-transforms_files/figure-html/cell-49-output-2.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Rotation specifications are also available in 2D space. As an example, we can rotate the 2D grid of our synthetic geotable by the counter clockwise angle <code>π/4</code>:</p>
<div id="9fe6c037" class="cell" data-execution_count="49">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>gt <span class="op">|&gt;</span> <span class="fu">Rotate</span>(<span class="fu">Angle2d</span>(<span class="cn">π</span><span class="op">/</span><span class="fl">4</span>)) <span class="op">|&gt;</span> viewer</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>┌ Warning: Found `resolution` in the theme when creating a `Scene`. The `resolution` keyword for `Scene`s and `Figure`s has been deprecated. Use `Figure(; size = ...` or `Scene(; size = ...)` instead, which better reflects that this is a unitless size and not a pixel resolution. The key could also come from `set_theme!` calls or related theming functions.
└ @ Makie ~/.julia/packages/Makie/We6MY/src/scenes.jl:227</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="50">
<div>
<figure class="figure">
<p><img src="05-transforms_files/figure-html/cell-50-output-2.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>In GIS, this new geotable would be called a rotated “raster”. As another example, let’s translate the geotable to the origin of the coordinate system with the <code>Translate</code> transform:</p>
<div id="3f02b04f" class="cell" data-execution_count="50">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>c <span class="op">=</span> <span class="fu">centroid</span>(gt.geometry)</span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a>gt <span class="op">|&gt;</span> <span class="fu">Translate</span>(<span class="fu">-to</span>(c)<span class="op">...</span>) <span class="op">|&gt;</span> viewer</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>┌ Warning: Found `resolution` in the theme when creating a `Scene`. The `resolution` keyword for `Scene`s and `Figure`s has been deprecated. Use `Figure(; size = ...` or `Scene(; size = ...)` instead, which better reflects that this is a unitless size and not a pixel resolution. The key could also come from `set_theme!` calls or related theming functions.
└ @ Makie ~/.julia/packages/Makie/We6MY/src/scenes.jl:227</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="51">
<div>
<figure class="figure">
<p><img src="05-transforms_files/figure-html/cell-51-output-2.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>and scale it with a positive factor for each dimension:</p>
<div id="39c2c470" class="cell" data-execution_count="51">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>gt <span class="op">|&gt;</span> <span class="fu">Scale</span>(<span class="fl">0.1</span>, <span class="fl">0.2</span>) <span class="op">|&gt;</span> viewer</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>┌ Warning: Found `resolution` in the theme when creating a `Scene`. The `resolution` keyword for `Scene`s and `Figure`s has been deprecated. Use `Figure(; size = ...` or `Scene(; size = ...)` instead, which better reflects that this is a unitless size and not a pixel resolution. The key could also come from `set_theme!` calls or related theming functions.
└ @ Makie ~/.julia/packages/Makie/We6MY/src/scenes.jl:227</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="52">
<div>
<figure class="figure">
<p><img src="05-transforms_files/figure-html/cell-52-output-2.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>The <code>StdCoords</code> transform combines <code>Translate</code> and <code>Scale</code> to standardize the coordinates of the domain to the interval <code>[-0.5, 0.5]</code>:</p>
<div id="6b1ce6f2" class="cell" data-execution_count="52">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>gt <span class="op">|&gt;</span> <span class="fu">StdCoords</span>() <span class="op">|&gt;</span> viewer</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>┌ Warning: Found `resolution` in the theme when creating a `Scene`. The `resolution` keyword for `Scene`s and `Figure`s has been deprecated. Use `Figure(; size = ...` or `Scene(; size = ...)` instead, which better reflects that this is a unitless size and not a pixel resolution. The key could also come from `set_theme!` calls or related theming functions.
└ @ Makie ~/.julia/packages/Makie/We6MY/src/scenes.jl:227</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="53">
<div>
<figure class="figure">
<p><img src="05-transforms_files/figure-html/cell-53-output-2.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>In GIS, another very important coordinate transform is the <code>Proj</code> transform. We will cover this transform in the next chapter because it depends on the concept of <a href="https://en.wikipedia.org/wiki/Map_projection">map projection</a>, which deserves more attention.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>In our framework, the <code>Proj</code> transform is just another coordinate transform. It is implemented with the same code optimizations, and can be used in conjunction with many other transforms that are not available elsewhere.</p>
</div>
</div>
</section>
<section id="advanced" class="level3" data-number="5.3.2">
<h3 data-number="5.3.2" class="anchored" data-anchor-id="advanced"><span class="header-section-number">5.3.2</span> Advanced</h3>
<p>Advanced geometric transforms are provided that change the topology of the <code>domain</code> besides the coordinates of points. Some of these transforms can be useful to repair problematic geometries acquired from sensors in the real world.</p>
<p>The <code>Repair</code> transform is parameterized by an integer <code>K</code> that identifies the repair to be performed. For example, <code>Repair{0}()</code> is a transform that removes duplicated vertices and faces in a domain represented by a mesh. The <code>Repair{9}()</code> on the other hand fixes the orientation of rings in polygonal areas so that the external boundary is oriented counter clockwise and the inner boundaries are oriented clockwise. The list of available repairs will continue to grow with the implementation of new geometric algorithms in the framework.</p>
<p>To understand why geometric transforms are more general than coordinate transforms, let’s consider the following polygonal area with holes:</p>
<div id="82d9c9e7" class="cell" data-execution_count="53">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a>outer <span class="op">=</span> [(<span class="fl">0.0</span>, <span class="fl">0.0</span>), (<span class="fl">1.0</span>, <span class="fl">0.0</span>), (<span class="fl">1.0</span>, <span class="fl">1.0</span>), (<span class="fl">0.0</span>, <span class="fl">1.0</span>)]</span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a>hole1 <span class="op">=</span> [(<span class="fl">0.2</span>, <span class="fl">0.2</span>), (<span class="fl">0.4</span>, <span class="fl">0.2</span>), (<span class="fl">0.4</span>, <span class="fl">0.4</span>), (<span class="fl">0.2</span>, <span class="fl">0.4</span>)]</span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a>hole2 <span class="op">=</span> [(<span class="fl">0.6</span>, <span class="fl">0.2</span>), (<span class="fl">0.8</span>, <span class="fl">0.2</span>), (<span class="fl">0.8</span>, <span class="fl">0.4</span>), (<span class="fl">0.6</span>, <span class="fl">0.4</span>)]</span>
<span id="cb74-4"><a href="#cb74-4" aria-hidden="true" tabindex="-1"></a>poly  <span class="op">=</span> <span class="fu">PolyArea</span>([outer, hole1, hole2])</span>
<span id="cb74-5"><a href="#cb74-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-6"><a href="#cb74-6" aria-hidden="true" tabindex="-1"></a><span class="fu">viz</span>(poly)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>┌ Warning: Found `resolution` in the theme when creating a `Scene`. The `resolution` keyword for `Scene`s and `Figure`s has been deprecated. Use `Figure(; size = ...` or `Scene(; size = ...)` instead, which better reflects that this is a unitless size and not a pixel resolution. The key could also come from `set_theme!` calls or related theming functions.
└ @ Makie ~/.julia/packages/Makie/We6MY/src/scenes.jl:227</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="54">
<div>
<figure class="figure">
<p><img src="05-transforms_files/figure-html/cell-54-output-2.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>We can connect the holes with the external boundary (or ring) using the <code>Bridge</code> transform:</p>
<div id="452fa742" class="cell" data-execution_count="54">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a>poly <span class="op">|&gt;</span> <span class="fu">Bridge</span>(<span class="fl">0.01</span>) <span class="op">|&gt;</span> viz</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>┌ Warning: Found `resolution` in the theme when creating a `Scene`. The `resolution` keyword for `Scene`s and `Figure`s has been deprecated. Use `Figure(; size = ...` or `Scene(; size = ...)` instead, which better reflects that this is a unitless size and not a pixel resolution. The key could also come from `set_theme!` calls or related theming functions.
└ @ Makie ~/.julia/packages/Makie/We6MY/src/scenes.jl:227</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="55">
<div>
<figure class="figure">
<p><img src="05-transforms_files/figure-html/cell-55-output-2.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>By looking at the visualization, we observe that the number of vertices changed to accommodate the so called “bridges” between the rings. The topology also changed as there are no holes in the resulting geometry.</p>
<p>As a final example of advanced geometric transform, we illustrate the <code>TaubinSmoothing</code> transform, which gradually removes sharp boundaries of a manifold mesh:</p>
<div id="39b3ef09" class="cell" data-execution_count="55">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a>st <span class="op">=</span> bt <span class="op">|&gt;</span> <span class="fu">TaubinSmoothing</span>(<span class="fl">30</span>)</span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> Mke.<span class="fu">Figure</span>()</span>
<span id="cb78-4"><a href="#cb78-4" aria-hidden="true" tabindex="-1"></a><span class="fu">viz</span>(fig[<span class="fl">1</span>,<span class="fl">1</span>], bt.geometry)</span>
<span id="cb78-5"><a href="#cb78-5" aria-hidden="true" tabindex="-1"></a><span class="fu">viz</span>(fig[<span class="fl">1</span>,<span class="fl">2</span>], st.geometry)</span>
<span id="cb78-6"><a href="#cb78-6" aria-hidden="true" tabindex="-1"></a>fig</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>┌ Warning: Found `resolution` in the theme when creating a `Scene`. The `resolution` keyword for `Scene`s and `Figure`s has been deprecated. Use `Figure(; size = ...` or `Scene(; size = ...)` instead, which better reflects that this is a unitless size and not a pixel resolution. The key could also come from `set_theme!` calls or related theming functions.
└ @ Makie ~/.julia/packages/Makie/We6MY/src/scenes.jl:227</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="56">
<div>
<figure class="figure">
<p><img src="05-transforms_files/figure-html/cell-56-output-2.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>For more advanced geometric transforms, please consult the official documentation.</p>
</section>
</section>
<section id="geospatial-transforms" class="level2" data-number="5.4">
<h2 data-number="5.4" class="anchored" data-anchor-id="geospatial-transforms"><span class="header-section-number">5.4</span> Geospatial transforms</h2>
<p>Geospatial transforms are those transforms that operate on both the <code>values</code> <strong>and</strong> the <code>domain</code> of the geotable. They are common in geostatistical workflows that need to remove geospatial “trends” or workflows that need to extract geometries from domains.</p>
<p>As an example, let’s consider the following geotable with a variable <code>z</code> that made of a trend component <code>μ</code> and a noise component <code>ϵ</code>:</p>
<div id="005508df" class="cell" data-execution_count="56">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="co"># quadratic + noise</span></span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a>r <span class="op">=</span> <span class="fu">range</span>(<span class="op">-</span><span class="fl">1</span>, stop<span class="op">=</span><span class="fl">1</span>, length<span class="op">=</span><span class="fl">100</span>)</span>
<span id="cb80-3"><a href="#cb80-3" aria-hidden="true" tabindex="-1"></a>μ <span class="op">=</span> [x<span class="op">^</span><span class="fl">2</span> <span class="op">+</span> y<span class="op">^</span><span class="fl">2</span> for x <span class="kw">in</span> r, y <span class="kw">in</span> r]</span>
<span id="cb80-4"><a href="#cb80-4" aria-hidden="true" tabindex="-1"></a>ϵ <span class="op">=</span> <span class="fl">0.1</span><span class="fu">rand</span>(<span class="fl">100</span>, <span class="fl">100</span>)</span>
<span id="cb80-5"><a href="#cb80-5" aria-hidden="true" tabindex="-1"></a>t <span class="op">=</span> <span class="fu">georef</span>((z<span class="op">=</span>μ<span class="op">+</span>ϵ,))</span>
<span id="cb80-6"><a href="#cb80-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-7"><a href="#cb80-7" aria-hidden="true" tabindex="-1"></a><span class="fu">viewer</span>(t)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>┌ Warning: Found `resolution` in the theme when creating a `Scene`. The `resolution` keyword for `Scene`s and `Figure`s has been deprecated. Use `Figure(; size = ...` or `Scene(; size = ...)` instead, which better reflects that this is a unitless size and not a pixel resolution. The key could also come from `set_theme!` calls or related theming functions.
└ @ Makie ~/.julia/packages/Makie/We6MY/src/scenes.jl:227</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="57">
<div>
<figure class="figure">
<p><img src="05-transforms_files/figure-html/cell-57-output-2.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>We can use the <code>Detrend</code> transform to remove a trend of polynomial degree <code>2</code>:</p>
<div id="7a60fed9" class="cell" data-execution_count="57">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a>t <span class="op">|&gt;</span> <span class="fu">Detrend</span>(degree<span class="op">=</span><span class="fl">2</span>) <span class="op">|&gt;</span> viewer</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>┌ Warning: Found `resolution` in the theme when creating a `Scene`. The `resolution` keyword for `Scene`s and `Figure`s has been deprecated. Use `Figure(; size = ...` or `Scene(; size = ...)` instead, which better reflects that this is a unitless size and not a pixel resolution. The key could also come from `set_theme!` calls or related theming functions.
└ @ Makie ~/.julia/packages/Makie/We6MY/src/scenes.jl:227</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="58">
<div>
<figure class="figure">
<p><img src="05-transforms_files/figure-html/cell-58-output-2.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>The remaining component can then be modeled with geostatistical models of geospatial correlation, which will be covered in <strong>Part IV</strong> of the book.</p>
<p>Models of geospatial correlation such as variograms <span class="citation" data-cites="Hoffimann2019">(<a href="references.html#ref-Hoffimann2019" role="doc-biblioref">Hoffimann and Zadrozny 2019</a>)</span> require unique coordinates in the geotable and that is the purpose of the <code>UniqueCoords</code> transform. It removes duplicate points in the geotable and aggregates the <code>values</code> with custom aggregation functions.</p>
<p>Let’s consider the following geotable stored in a <code>.png</code> file to illustrate another geospatial transform:</p>
<div id="42aa0e7c" class="cell" data-execution_count="58">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a>letters <span class="op">=</span> GeoIO.<span class="fu">load</span>(<span class="st">"data/letters.png"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="59">
<table class="caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<caption>44255×2 GeoTable over 265×167 TransformedGrid</caption>
<thead>
<tr class="header">
<th style="text-align: center;" data-quarto-table-cell-role="th">color</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">geometry</th>
</tr>
<tr class="odd subheader">
<th style="text-align: center;" data-quarto-table-cell-role="th">Unknown</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Quadrangle</th>
</tr>
<tr class="header subheader headerLastRow">
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">🖈 Cartesian{NoDatum}</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">Gray{N0f8}(1.0)</td>
<td style="text-align: center;">Quadrangle((x: -1.62266e-14 m, y: 265.0 m), ..., (x: 1.0 m, y: 265.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">Gray{N0f8}(1.0)</td>
<td style="text-align: center;">Quadrangle((x: -1.61653e-14 m, y: 264.0 m), ..., (x: 1.0 m, y: 264.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">Gray{N0f8}(1.0)</td>
<td style="text-align: center;">Quadrangle((x: -1.61041e-14 m, y: 263.0 m), ..., (x: 1.0 m, y: 263.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">Gray{N0f8}(1.0)</td>
<td style="text-align: center;">Quadrangle((x: -1.60429e-14 m, y: 262.0 m), ..., (x: 1.0 m, y: 262.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">Gray{N0f8}(1.0)</td>
<td style="text-align: center;">Quadrangle((x: -1.59816e-14 m, y: 261.0 m), ..., (x: 1.0 m, y: 261.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">Gray{N0f8}(1.0)</td>
<td style="text-align: center;">Quadrangle((x: -1.59204e-14 m, y: 260.0 m), ..., (x: 1.0 m, y: 260.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">Gray{N0f8}(1.0)</td>
<td style="text-align: center;">Quadrangle((x: -1.58592e-14 m, y: 259.0 m), ..., (x: 1.0 m, y: 259.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">Gray{N0f8}(1.0)</td>
<td style="text-align: center;">Quadrangle((x: -1.57979e-14 m, y: 258.0 m), ..., (x: 1.0 m, y: 258.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">Gray{N0f8}(1.0)</td>
<td style="text-align: center;">Quadrangle((x: -1.57367e-14 m, y: 257.0 m), ..., (x: 1.0 m, y: 257.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">Gray{N0f8}(1.0)</td>
<td style="text-align: center;">Quadrangle((x: -1.56755e-14 m, y: 256.0 m), ..., (x: 1.0 m, y: 256.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>The <code>Potrace</code> transform can be used to extract complex geometries from a geotable over a 2D <code>Grid</code>. It transforms the <code>Grid</code> domain into a <code>GeometrySet</code> based on any column that contains a discrete set of marker values. In this example, we use the <code>color</code> as the column with markers:</p>
<div id="b26039c4" class="cell" data-execution_count="59">
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a>Ab <span class="op">=</span> letters <span class="op">|&gt;</span> <span class="fu">Potrace</span>(<span class="st">"color"</span>, ϵ<span class="op">=</span><span class="fl">0.8</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="60">
<table class="caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<caption>2×2 GeoTable over 2 GeometrySet</caption>
<thead>
<tr class="header">
<th style="text-align: center;" data-quarto-table-cell-role="th">color</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">geometry</th>
</tr>
<tr class="odd subheader">
<th style="text-align: center;" data-quarto-table-cell-role="th">Unknown</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">MultiPolygon</th>
</tr>
<tr class="header subheader headerLastRow">
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">🖈 Cartesian{NoDatum}</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">Gray{N0f8}(1.0)</td>
<td style="text-align: center;">Multi(4×PolyArea)</td>
</tr>
<tr class="even">
<td style="text-align: center;">Gray{N0f8}(0.0)</td>
<td style="text-align: center;">Multi(2×PolyArea)</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>The option <code>ϵ</code> controls the deviation tolerance used to simplify the boundaries of the geometries. The higher is the tolerance, the less is the number of segments in the boundary:</p>
<div id="cbe67104" class="cell" data-execution_count="60">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="fu">viz</span>(Ab.geometry[<span class="fl">2</span>], color <span class="op">=</span> <span class="st">"black"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>┌ Warning: Found `resolution` in the theme when creating a `Scene`. The `resolution` keyword for `Scene`s and `Figure`s has been deprecated. Use `Figure(; size = ...` or `Scene(; size = ...)` instead, which better reflects that this is a unitless size and not a pixel resolution. The key could also come from `set_theme!` calls or related theming functions.
└ @ Makie ~/.julia/packages/Makie/We6MY/src/scenes.jl:227</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="61">
<div>
<figure class="figure">
<p><img src="05-transforms_files/figure-html/cell-61-output-2.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>In the reverse direction, we have the <code>Rasterize</code> transform, which takes a geotable over a <code>GeometrySet</code> and assigns the geometries to a <code>Grid</code>. In this transform, we can either provide an external grid for the the assignments, or request a grid size to discretize the <code>boundingbox</code> of all geometries:</p>
<div id="54154cff" class="cell" data-execution_count="61">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a>A <span class="op">=</span> [<span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">4</span>, <span class="fl">5</span>]</span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a>B <span class="op">=</span> [<span class="fl">1.1</span>, <span class="fl">2.2</span>, <span class="fl">3.3</span>, <span class="fl">4.4</span>, <span class="fl">5.5</span>]</span>
<span id="cb88-3"><a href="#cb88-3" aria-hidden="true" tabindex="-1"></a>p1 <span class="op">=</span> <span class="fu">PolyArea</span>((<span class="fl">2</span>, <span class="fl">0</span>), (<span class="fl">6</span>, <span class="fl">2</span>), (<span class="fl">2</span>, <span class="fl">2</span>))</span>
<span id="cb88-4"><a href="#cb88-4" aria-hidden="true" tabindex="-1"></a>p2 <span class="op">=</span> <span class="fu">PolyArea</span>((<span class="fl">0</span>, <span class="fl">6</span>), (<span class="fl">3</span>, <span class="fl">8</span>), (<span class="fl">0</span>, <span class="fl">10</span>))</span>
<span id="cb88-5"><a href="#cb88-5" aria-hidden="true" tabindex="-1"></a>p3 <span class="op">=</span> <span class="fu">PolyArea</span>((<span class="fl">3</span>, <span class="fl">6</span>), (<span class="fl">9</span>, <span class="fl">6</span>), (<span class="fl">9</span>, <span class="fl">9</span>), (<span class="fl">6</span>, <span class="fl">9</span>))</span>
<span id="cb88-6"><a href="#cb88-6" aria-hidden="true" tabindex="-1"></a>p4 <span class="op">=</span> <span class="fu">PolyArea</span>((<span class="fl">7</span>, <span class="fl">0</span>), (<span class="fl">10</span>, <span class="fl">0</span>), (<span class="fl">10</span>, <span class="fl">4</span>), (<span class="fl">7</span>, <span class="fl">4</span>))</span>
<span id="cb88-7"><a href="#cb88-7" aria-hidden="true" tabindex="-1"></a>p5 <span class="op">=</span> <span class="fu">PolyArea</span>((<span class="fl">1</span>, <span class="fl">3</span>), (<span class="fl">5</span>, <span class="fl">3</span>), (<span class="fl">6</span>, <span class="fl">6</span>), (<span class="fl">3</span>, <span class="fl">8</span>), (<span class="fl">0</span>, <span class="fl">6</span>))</span>
<span id="cb88-8"><a href="#cb88-8" aria-hidden="true" tabindex="-1"></a>gt <span class="op">=</span> <span class="fu">georef</span>((; A, B), [p1, p2, p3, p4, p5])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="62">
<table class="caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<caption>5×3 GeoTable over 5 GeometrySet</caption>
<thead>
<tr class="header">
<th style="text-align: center;" data-quarto-table-cell-role="th">A</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">B</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">geometry</th>
</tr>
<tr class="odd subheader">
<th style="text-align: center;" data-quarto-table-cell-role="th">Categorical</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Continuous</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">PolyArea</th>
</tr>
<tr class="header subheader headerLastRow">
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">🖈 Cartesian{NoDatum}</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">1</td>
<td style="text-align: center;">1.1</td>
<td style="text-align: center;">PolyArea((x: 2.0 m, y: 0.0 m), (x: 6.0 m, y: 2.0 m), (x: 2.0 m, y: 2.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">2</td>
<td style="text-align: center;">2.2</td>
<td style="text-align: center;">PolyArea((x: 0.0 m, y: 6.0 m), (x: 3.0 m, y: 8.0 m), (x: 0.0 m, y: 10.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">3</td>
<td style="text-align: center;">3.3</td>
<td style="text-align: center;">PolyArea((x: 3.0 m, y: 6.0 m), ..., (x: 6.0 m, y: 9.0 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">4</td>
<td style="text-align: center;">4.4</td>
<td style="text-align: center;">PolyArea((x: 7.0 m, y: 0.0 m), ..., (x: 7.0 m, y: 4.0 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">5</td>
<td style="text-align: center;">5.5</td>
<td style="text-align: center;">PolyArea((x: 1.0 m, y: 3.0 m), ..., (x: 0.0 m, y: 6.0 m))</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="b59cc81a" class="cell" data-execution_count="62">
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a>gt <span class="op">|&gt;</span> viewer</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>┌ Warning: Found `resolution` in the theme when creating a `Scene`. The `resolution` keyword for `Scene`s and `Figure`s has been deprecated. Use `Figure(; size = ...` or `Scene(; size = ...)` instead, which better reflects that this is a unitless size and not a pixel resolution. The key could also come from `set_theme!` calls or related theming functions.
└ @ Makie ~/.julia/packages/Makie/We6MY/src/scenes.jl:227</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="63">
<div>
<figure class="figure">
<p><img src="05-transforms_files/figure-html/cell-63-output-2.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="1f7ed56e" class="cell" data-execution_count="63">
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a>nt <span class="op">=</span> gt <span class="op">|&gt;</span> <span class="fu">Rasterize</span>(<span class="fl">20</span>, <span class="fl">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="64">
<table class="caption-top table table-sm table-striped small" data-quarto-postprocess="true">
<caption>400×3 GeoTable over 20×20 CartesianGrid</caption>
<thead>
<tr class="header">
<th style="text-align: center;" data-quarto-table-cell-role="th">A</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">B</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">geometry</th>
</tr>
<tr class="odd subheader">
<th style="text-align: center;" data-quarto-table-cell-role="th">Categorical</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Continuous</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Quadrangle</th>
</tr>
<tr class="header subheader headerLastRow">
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">[NoUnits]</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">🖈 Cartesian{NoDatum}</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">missing</td>
<td style="text-align: center;">missing</td>
<td style="text-align: center;">Quadrangle((x: 0.0 m, y: 0.0 m), ..., (x: 0.0 m, y: 0.5 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">missing</td>
<td style="text-align: center;">missing</td>
<td style="text-align: center;">Quadrangle((x: 0.5 m, y: 0.0 m), ..., (x: 0.5 m, y: 0.5 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">missing</td>
<td style="text-align: center;">missing</td>
<td style="text-align: center;">Quadrangle((x: 1.0 m, y: 0.0 m), ..., (x: 1.0 m, y: 0.5 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">1</td>
<td style="text-align: center;">1.1</td>
<td style="text-align: center;">Quadrangle((x: 1.5 m, y: 0.0 m), ..., (x: 1.5 m, y: 0.5 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">1</td>
<td style="text-align: center;">1.1</td>
<td style="text-align: center;">Quadrangle((x: 2.0 m, y: 0.0 m), ..., (x: 2.0 m, y: 0.5 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">missing</td>
<td style="text-align: center;">missing</td>
<td style="text-align: center;">Quadrangle((x: 2.5 m, y: 0.0 m), ..., (x: 2.5 m, y: 0.5 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">missing</td>
<td style="text-align: center;">missing</td>
<td style="text-align: center;">Quadrangle((x: 3.0 m, y: 0.0 m), ..., (x: 3.0 m, y: 0.5 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">missing</td>
<td style="text-align: center;">missing</td>
<td style="text-align: center;">Quadrangle((x: 3.5 m, y: 0.0 m), ..., (x: 3.5 m, y: 0.5 m))</td>
</tr>
<tr class="odd">
<td style="text-align: center;">missing</td>
<td style="text-align: center;">missing</td>
<td style="text-align: center;">Quadrangle((x: 4.0 m, y: 0.0 m), ..., (x: 4.0 m, y: 0.5 m))</td>
</tr>
<tr class="even">
<td style="text-align: center;">missing</td>
<td style="text-align: center;">missing</td>
<td style="text-align: center;">Quadrangle((x: 4.5 m, y: 0.0 m), ..., (x: 4.5 m, y: 0.5 m))</td>
</tr>
<tr class="odd">
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
<td style="text-align: right;">⋮</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="4da26ac5" class="cell" data-execution_count="64">
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a>nt <span class="op">|&gt;</span> viewer</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>┌ Warning: Found `resolution` in the theme when creating a `Scene`. The `resolution` keyword for `Scene`s and `Figure`s has been deprecated. Use `Figure(; size = ...` or `Scene(; size = ...)` instead, which better reflects that this is a unitless size and not a pixel resolution. The key could also come from `set_theme!` calls or related theming functions.
└ @ Makie ~/.julia/packages/Makie/We6MY/src/scenes.jl:227</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="65">
<div>
<figure class="figure">
<p><img src="05-transforms_files/figure-html/cell-65-output-2.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>The values of the variables are aggregated at geometric intersections using a default aggregation function, which can be overwritten with an option. Once the geotable is defined over a <code>Grid</code>, it is possible to refine or coarsen the grid with the <code>Downscale</code> and <code>Upscale</code> transforms.</p>
<p>The <code>Transfer</code> of values to a new geospatial domain is another very useful geospatial transform. The <code>Aggregate</code> transform is related, but aggregates the values with given aggregation functions.</p>
</section>
<section id="remarks" class="level2" data-number="5.5">
<h2 data-number="5.5" class="anchored" data-anchor-id="remarks"><span class="header-section-number">5.5</span> Remarks</h2>
<p>In this chapter we learned the important concept of <strong>transforms</strong>, and saw examples of the concept in action with synthetic data. In order to leverage the large number of transforms implemented in the framework, all we need to do is load our geospatial data as a geotable using <code>georef</code> or GeoIO.jl.</p>
<p>Some additional remarks:</p>
<ul>
<li>One of the major advantages of transforms compared to traditional row/column access in data science is that they <strong>preserve geospatial information</strong>. There is no need to keep track of indices in arrays to repeatedly reattach values to geometries.</li>
<li>Transforms can be organized into three classes—feature, geometric and geospatial—depending on how they operate with the <code>values</code> and the <code>domain</code> of the geotable:
<ul>
<li><strong>Feature</strong> transforms operate on the <code>values</code>. They include column selection, data cleaning, statistical analysis and any transform designed for traditional Tables.jl.</li>
<li><strong>Geometric</strong> transforms operate on the <code>domain</code>. They include coordinate transforms that simply modify the coordinates of points as well as more advanced transforms that can change the topology of the domain.</li>
<li><strong>Geospatial</strong> transforms operate on both the <code>values</code> and <code>domain</code>. They include geostatistical transforms and transforms that use other columns besides the <code>geometry</code> column to produce new columns and geometries.</li>
</ul></li>
</ul>
<p>In the next chapters, we will review map projections with the <code>Proj</code> coordinate transform, and will introduce one of the greatest features of the framework known as <strong>transform pipelines</strong>.</p>


<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list" style="display: none">
<div id="ref-Hoffimann2019" class="csl-entry" role="listitem">
Hoffimann, Júlio, and Bianca Zadrozny. 2019. <span>“Efficient Variography with Partition Variograms.”</span> <em>Computers &amp; Geosciences</em> 131: 52–59. https://doi.org/<a href="https://doi.org/10.1016/j.cageo.2019.06.013">https://doi.org/10.1016/j.cageo.2019.06.013</a>.
</div>
<div id="ref-Koolen2023" class="csl-entry" role="listitem">
Koolen, Twan, Yuto Horikawa, Andy Ferris, Claire Foster, awbsmith, ryanelandt, Jan Weidner, et al. 2023. <span>“JuliaGeometry/Rotations.jl: V1.6.0.”</span> Zenodo. <a href="https://doi.org/10.5281/zenodo.8366010">https://doi.org/10.5281/zenodo.8366010</a>.
</div>
<div id="ref-Lin2023" class="csl-entry" role="listitem">
Lin, Dahua, David Widmann, Simon Byrne, John Myles White, Andreas Noack, Mathieu Besançon, Douglas Bates, et al. 2023. <span>“JuliaStats/Distributions.jl: V0.25.100.”</span> Zenodo. <a href="https://doi.org/10.5281/zenodo.8224988">https://doi.org/10.5281/zenodo.8224988</a>.
</div>
<div id="ref-Thompson2023" class="csl-entry" role="listitem">
Thompson, William. 2023. <span>“<span class="nocase">PairPlots.jl</span> Beautiful and Flexible Visualizations of High Dimensional Data.”</span> <a href="https://sefffal.github.io/PairPlots.jl/dev" class="uri">https://sefffal.github.io/PairPlots.jl/dev</a>.
</div>
</div>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./04-geoproc.html" class="pagination-link" aria-label="Geometric processing">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Geometric processing</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./06-projections.html" class="pagination-link" aria-label="Map projections 🚧">
        <span class="nav-page-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Map projections 🚧</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>